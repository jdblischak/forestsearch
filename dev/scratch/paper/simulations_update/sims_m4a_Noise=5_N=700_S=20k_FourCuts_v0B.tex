\documentclass[8pt]{article}\usepackage[]{graphicx}\usepackage[]{xcolor}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage{multicol}
\usepackage{amssymb,mathrsfs,graphicx}
\usepackage{enumerate}
\usepackage{amsthm}
\usepackage{lscape}
\usepackage{pdfpages}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]

\theoremstyle{remark}
\newtheorem{remark}{Remark}

\usepackage[colorlinks=true,linkcolor={blue},citecolor={blue},urlcolor={blue}]{hyperref}
\usepackage{longtable,ctable}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{multirow}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{mathptmx}
\usepackage{natbib}
\usepackage{setspace}

\usepackage[utf8]{inputenc}
\usepackage{pgf}

\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{enumerate}
\usepackage{threeparttable}


\newcommand{\R}{R}
\newcommand{\gbsg}{gbsg}

\def\FsNg{\hbox{FS}(M_{g})}

\def\hhat{\hat\theta(\hat{H})}
\def\hchat{\hat\theta(\hat{H}^{c})}
\def\hknow{\hat\theta(H)}
\def\hcknow{\hat\theta(H^{c})}
\def\hplim{\theta^{\dagger}(H)}
\def\hcplim{\theta^{\dagger}(H^{c})}


\newcommand{\indep}{\perp \!\!\! \perp}

\textheight=9.25in \textwidth=6.0in 
\topmargin=0in
\evensidemargin=0in \oddsidemargin=0in
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}

\raggedbottom





\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{N} \hlkwb{<-} \hlnum{700}
\hlstd{Nsims} \hlkwb{<-} \hlnum{1000}

\hlstd{maxFollow} \hlkwb{<-} \hlnum{84}
\hlstd{cens.type} \hlkwb{<-} \hlstr{"weibull"}
\hlcom{######################### Forest search criteria}
\hlstd{hr.threshold} \hlkwb{<-} \hlnum{1.25}  \hlcom{# Initital candidates }
\hlstd{hr.consistency} \hlkwb{<-} \hlnum{1}  \hlcom{# Candidates for many splits}

\hlstd{pconsistency.threshold} \hlkwb{<-} \hlnum{0.9}
\hlstd{stop.threshold} \hlkwb{<-} \hlnum{0.95}

\hlstd{maxk} \hlkwb{<-} \hlnum{2}
\hlstd{nmin.fs} \hlkwb{<-} \hlnum{60}
\hlstd{pstop_futile} \hlkwb{<-} \hlnum{0.7}

\hlcom{# Limit timing for forestsearch}
\hlstd{max.minutes} \hlkwb{<-} \hlnum{3}
\hlstd{m1.threshold} \hlkwb{<-} \hlnum{Inf}  \hlcom{# Turning this off (Default)}
\hlcom{# pconsistency.threshold<-0.70 # Minimum threshold (will choose max among}
\hlcom{# subgroups satisfying)}
\hlstd{fs.splits} \hlkwb{<-} \hlnum{400}  \hlcom{# How many times to split for consistency}
\hlcom{# vi is % factor is selected in cross-validation --> higher more important}
\hlstd{vi.grf.min} \hlkwb{<-} \hlstd{(}\hlopt{-}\hlnum{1}\hlstd{)} \hlopt{*} \hlnum{0.2}  \hlcom{# This is default (to NOT exclude via VI)}
\hlcom{# Null, turns off grf screening}
\hlstd{d.min} \hlkwb{<-} \hlnum{10}  \hlcom{# Min number of events for both arms (d0.min=d1.min=d.min)}
\hlcom{# default=5}

\hlcom{########################## Virtual twins analysis Counter-factual difference}
\hlcom{########################## (C-E) >= vt.threshold Large values in favor of C}
\hlcom{########################## (control)}
\hlstd{vt.threshold} \hlkwb{<-} \hlnum{0.225}  \hlcom{# For VT delta}
\hlstd{treat.threshold} \hlkwb{<-} \hlnum{0}

\hlstd{maxdepth} \hlkwb{<-} \hlnum{2}
\hlstd{n.min} \hlkwb{<-} \hlnum{60}
\hlstd{ntree} \hlkwb{<-} \hlnum{1000}

\hlcom{# GRF criteria}
\hlstd{dmin.grf} \hlkwb{<-} \hlnum{12}  \hlcom{# For GRF delta}
\hlcom{# Note: For CRT this represents dmin.grf/2 RMS for control (-dmin.grf/2 for}
\hlcom{# treatment)}
\hlstd{frac.tau} \hlkwb{<-} \hlnum{0.6}

\hlcom{# For forestsearch algorithm use same as GRF}
\hlstd{frac.tau_fs} \hlkwb{<-} \hlnum{0.6}
\hlstd{dmin.grf_fs} \hlkwb{<-} \hlnum{12}
\hlstd{maxdepth_fs} \hlkwb{<-} \hlnum{2}

\hlstd{label.analyses} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlstr{"FSl"}\hlstd{,} \hlstr{"GRF"}\hlstd{,} \hlstr{"VT(24)"}\hlstd{,} \hlstr{"VT#(24)"}\hlstd{,} \hlstr{"VT(36)"}\hlstd{,} \hlstr{"VT#(36)"}\hlstd{,} \hlstr{"GRF.60"}\hlstd{)}
\hlcom{# Classification table names}
\hlstd{est_names} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlstr{"$FS_\{g\}$"}\hlstd{,} \hlstr{"$FS_\{lg\}$"}\hlstd{,} \hlstr{"$GRF$"}\hlstd{,} \hlstr{"$GRF_\{60\}$"}\hlstd{,} \hlstr{"$VT(24)$"}\hlstd{,} \hlstr{"$\{VT\}^\{\textbackslash{}\textbackslash{}#\}(24)$"}\hlstd{,}
    \hlstr{"$VT(36)$"}\hlstd{,} \hlstr{"$\{VT\}^\{\textbackslash{}\textbackslash{}#\}(36)$"}\hlstd{)}

\hlstd{outcome.name} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlstr{"y.sim"}\hlstd{)}
\hlstd{event.name} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlstr{"event.sim"}\hlstd{)}
\hlstd{id.name} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlstr{"id"}\hlstd{)}
\hlstd{treat.name} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlstr{"treat"}\hlstd{)}

\hlstd{cox.formula.sim} \hlkwb{<-} \hlkwd{as.formula}\hlstd{(}\hlkwd{paste}\hlstd{(}\hlstr{"Surv(y.sim,event.sim)~treat"}\hlstd{))}
\hlstd{cox.formula.adj.sim} \hlkwb{<-} \hlkwd{as.formula}\hlstd{(}\hlkwd{paste}\hlstd{(}\hlstr{"Surv(y.sim,event.sim)~treat+v1+v2+v3+v4+v5"}\hlstd{))}

\hlstd{get.FS} \hlkwb{<-} \hlnum{TRUE}
\hlstd{get.VT} \hlkwb{<-} \hlnum{TRUE}
\hlstd{get.GRF} \hlkwb{<-} \hlnum{TRUE}

\hlstd{fl_prefix} \hlkwb{<-} \hlkwd{paste0}\hlstd{(}\hlstr{"oc_sims="}\hlstd{, Nsims,} \hlstr{"_"}\hlstd{)}

\hlstd{out.loc} \hlkwb{<-} \hlkwd{paste0}\hlstd{(}\hlstr{"results/"}\hlstd{, fl_prefix)}

\hlcom{# m1 -censoring adjustment}
\hlstd{muC.adj} \hlkwb{<-} \hlkwd{log}\hlstd{(}\hlnum{1.5}\hlstd{)}

\hlcom{# 0, 3, or 5}
\hlstd{n_add_noise} \hlkwb{<-} \hlnum{5}

\hlstd{mindex} \hlkwb{<-} \hlstr{"m4a"}
\hlstd{file.index} \hlkwb{<-} \hlstr{"v0B-4cuts"}

\hlstd{z1_frac} \hlkwb{<-} \hlnum{0.25}

\hlkwa{if} \hlstd{(mindex} \hlopt{==} \hlstr{"m4a"}\hlstd{) \{}
    \hlstd{k.z3} \hlkwb{<-} \hlnum{1}
    \hlstd{k.treat} \hlkwb{<-} \hlnum{0.9}
    \hlstd{pH_super} \hlkwb{<-} \hlnum{0.125}  \hlcom{# non-NULL re-defines z1_frac}
\hlstd{\}}

\hlkwa{if} \hlstd{(mindex} \hlopt{==} \hlstr{"m4aB"}\hlstd{) \{}
    \hlstd{k.z3} \hlkwb{<-} \hlnum{1}
    \hlstd{k.treat} \hlkwb{<-} \hlnum{0.9}
    \hlstd{pH_super} \hlkwb{<-} \hlnum{0.2}  \hlcom{# non-NULL re-defines z1_frac}
\hlstd{\}}

\hlkwa{if} \hlstd{(mindex} \hlopt{==} \hlstr{"m4b"}\hlstd{) \{}
    \hlstd{k.z3} \hlkwb{<-} \hlnum{1}
    \hlstd{k.treat} \hlkwb{<-} \hlnum{1.25}
    \hlstd{pH_super} \hlkwb{<-} \hlnum{0.3}  \hlcom{# non-NULL re-defines z1_frac}
\hlstd{\}}

\hlkwa{if} \hlstd{(mindex} \hlopt{==} \hlstr{"m4c"}\hlstd{) \{}
    \hlstd{k.z3} \hlkwb{<-} \hlnum{1}
    \hlstd{k.treat} \hlkwb{<-} \hlnum{1.5}
    \hlstd{pH_super} \hlkwb{<-} \hlnum{0.3}  \hlcom{# non-NULL re-defines z1_frac}
\hlstd{\}}

\hlstd{model.index} \hlkwb{<-} \hlkwd{paste0}\hlstd{(mindex,} \hlstr{"-Noise="}\hlstd{,} \hlstr{""}\hlstd{)}
\hlstd{model.index} \hlkwb{<-} \hlkwd{paste0}\hlstd{(model.index, n_add_noise,} \hlstr{""}\hlstd{)}

\hlkwa{if} \hlstd{(}\hlkwd{is.null}\hlstd{(pH_super)) \{}
    \hlcom{# pH_check<-with(gbsg,mean(pgr<=quantile(pgr,c(z3_frac),1,0) &}
    \hlcom{# er<=quantile(er,z1_frac)))}
    \hlstd{pH_check} \hlkwb{<-} \hlkwd{with}\hlstd{(gbsg,} \hlkwd{mean}\hlstd{(meno} \hlopt{==} \hlnum{0} \hlopt{&} \hlstd{er} \hlopt{<=} \hlkwd{quantile}\hlstd{(er, z1_frac)))}
    \hlkwd{cat}\hlstd{(}\hlstr{"Underlying pH_super"}\hlstd{,} \hlkwd{c}\hlstd{(pH_check),} \hlstr{"\textbackslash{}n"}\hlstd{)}
\hlstd{\}}
\hlcom{# pH_super specified If pH_super then override z1_frac and find z1_frac to}
\hlcom{# yield pH_super}

\hlkwa{if} \hlstd{(}\hlopt{!}\hlkwd{is.null}\hlstd{(pH_super)) \{}
    \hlcom{# Approximate Z1 quantile to yield pH proportion}
    \hlstd{z1_q} \hlkwb{<-} \hlkwd{uniroot}\hlstd{(propH.obj4,} \hlkwd{c}\hlstd{(}\hlnum{0}\hlstd{,} \hlnum{1}\hlstd{),} \hlkwc{tol} \hlstd{=} \hlnum{1e-04}\hlstd{,} \hlkwc{pH.target} \hlstd{= pH_super)}\hlopt{$}\hlstd{root}
    \hlcom{# pH_check<-with(gbsg,mean(pgr<=quantile(pgr,c(z3_frac),1,0) &}
    \hlcom{# er<=quantile(er,z1_q)))}
    \hlstd{pH_check} \hlkwb{<-} \hlkwd{with}\hlstd{(gbsg,} \hlkwd{mean}\hlstd{(meno} \hlopt{==} \hlnum{0} \hlopt{&} \hlstd{er} \hlopt{<=} \hlkwd{quantile}\hlstd{(er, z1_q)))}
    \hlkwd{cat}\hlstd{(}\hlstr{"pH"}\hlstd{,} \hlkwd{c}\hlstd{(pH_check),} \hlstr{"\textbackslash{}n"}\hlstd{)}
    \hlstd{rel_error} \hlkwb{<-} \hlstd{(pH_super} \hlopt{-} \hlstd{pH_check)}\hlopt{/}\hlstd{pH_super}
    \hlkwa{if} \hlstd{(}\hlkwd{abs}\hlstd{(rel_error)} \hlopt{>=} \hlnum{0.1}\hlstd{)}
        \hlkwd{stop}\hlstd{(}\hlstr{"pH_super approximation relative error exceeds 10%"}\hlstd{)}
    \hlstd{z1_frac} \hlkwb{<-} \hlstd{z1_q}
    \hlkwd{cat}\hlstd{(}\hlstr{"Underlying pH_super"}\hlstd{,} \hlkwd{c}\hlstd{(pH_check),} \hlstr{"\textbackslash{}n"}\hlstd{)}
\hlstd{\}}
\end{alltt}
\begin{verbatim}
## pH 0.122449 
## Underlying pH_super 0.122449
\end{verbatim}
\begin{alltt}
\hlcom{# Bootstrap on log(hr) scale converted to HR (est.loghr=TRUE & est.scale='hr')}
\hlstd{est.loghr} \hlkwb{<-} \hlnum{TRUE}
\hlstd{est.scale} \hlkwb{<-} \hlstr{"hr"}
\hlstd{t.start.all} \hlkwb{<-} \hlkwd{proc.time}\hlstd{()[}\hlnum{3}\hlstd{]}

\hlcom{# Classification table names Note: within tab_tests (summary.VTFS) we rename so}
\hlcom{# that denominator in ppv(hatH) is # hatH Manuscript section 3.2 will be}
\hlcom{# updated accordingly}

\hlstd{stat_names} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlstr{"any(H)"}\hlstd{,} \hlstr{"$\{sens\}(\textbackslash{}\textbackslash{}hat\{H\})$"}\hlstd{,} \hlstr{"$\{sens\}(\textbackslash{}\textbackslash{}hat\{H\}^\{C\})$"}\hlstd{,} \hlstr{"$\{ppv\}(\textbackslash{}\textbackslash{}hat\{H\})$"}\hlstd{,}
    \hlstr{"$\{ppv\}(\textbackslash{}\textbackslash{}hat\{H\}^\{C\})$"}\hlstd{,} \hlstr{"$\{avg\}\textbackslash{}\textbackslash{}vert \textbackslash{}\textbackslash{}hat\{H\} \textbackslash{}\textbackslash{}vert$"}\hlstd{,} \hlstr{"$\{min\}\textbackslash{}\textbackslash{}vert \textbackslash{}\textbackslash{}hat\{H\} \textbackslash{}\textbackslash{}vert$"}\hlstd{,}
    \hlstr{"$\{max\}\textbackslash{}\textbackslash{}vert \textbackslash{}\textbackslash{}hat\{H\} \textbackslash{}\textbackslash{}vert$"}\hlstd{,} \hlstr{"$\{avg\}\textbackslash{}\textbackslash{}vert \textbackslash{}\textbackslash{}hat\{H\}^\{C\} \textbackslash{}\textbackslash{}vert$"}\hlstd{,} \hlstr{"$\{min\}\textbackslash{}\textbackslash{}vert \textbackslash{}\textbackslash{}hat\{H\}^\{C\} \textbackslash{}\textbackslash{}vert$"}\hlstd{,}
    \hlstr{"$\{max\}\textbackslash{}\textbackslash{}vert \textbackslash{}\textbackslash{}hat\{H\}^\{C\} \textbackslash{}\textbackslash{}vert$"}\hlstd{)}

\hlkwa{if} \hlstd{(}\hlopt{!}\hlstd{get.FS) est_names} \hlkwb{<-} \hlstd{est_names[}\hlopt{-}\hlkwd{c}\hlstd{(}\hlnum{1}\hlopt{:}\hlnum{3}\hlstd{)]}
\end{alltt}
\end{kframe}
\end{knitrout}


\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{mod.harm} \hlkwb{<-} \hlstr{"null"}
\hlstd{this.dgm} \hlkwb{<-} \hlkwd{get.dgm4.OC}\hlstd{(}\hlkwc{mod.harm} \hlstd{= mod.harm,} \hlkwc{N} \hlstd{= N,} \hlkwc{k.treat} \hlstd{= k.treat,} \hlkwc{model.index} \hlstd{= model.index,}
    \hlkwc{sol_tol} \hlstd{=} \hlnum{10}\hlopt{^-}\hlnum{8}\hlstd{,} \hlkwc{hrH.target} \hlstd{= hrH.target,} \hlkwc{cens.type} \hlstd{= cens.type,} \hlkwc{out.loc} \hlstd{= out.loc,}
    \hlkwc{file.index} \hlstd{= file.index,} \hlkwc{details} \hlstd{=} \hlnum{TRUE}\hlstd{,} \hlkwc{parms_torand} \hlstd{=} \hlnum{FALSE}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/r_null-1} 
\begin{kframe}\begin{verbatim}
## Super-population empirical harm and non-harm hazard ratios= NA 0.701027 
## Causal HR (empirical ITT)= 0.701027
\end{verbatim}
\begin{alltt}
\hlstd{dgm} \hlkwb{<-} \hlstd{this.dgm}\hlopt{$}\hlstd{dgm}
\hlstd{output.file} \hlkwb{<-} \hlstd{this.dgm}\hlopt{$}\hlstd{out.file}

\hlkwa{if} \hlstd{(}\hlopt{!}\hlkwd{is.null}\hlstd{(output.file)} \hlopt{& !}\hlkwd{grepl}\hlstd{(mod.harm, output.file))} \hlkwd{stop}\hlstd{(}\hlstr{"Wrong file name for mod.harm"}\hlstd{)}

\hlcom{# Show first simulation ans1 <- oc_analyses_m4_FS4(1)}

\hlstd{t.start} \hlkwb{<-} \hlkwd{proc.time}\hlstd{()[}\hlnum{3}\hlstd{]}
\hlstd{res} \hlkwb{<-} \hlkwd{foreach}\hlstd{(}\hlkwc{sim} \hlstd{=} \hlkwd{seq_len}\hlstd{(Nsims),} \hlkwc{.options.future} \hlstd{=} \hlkwd{list}\hlstd{(}\hlkwc{seed} \hlstd{=} \hlnum{TRUE}\hlstd{),} \hlkwc{.combine} \hlstd{=} \hlstr{"rbind"}\hlstd{,}
    \hlkwc{.errorhandling} \hlstd{=} \hlstr{"pass"}\hlstd{)} \hlopt{%dofuture%} \hlstd{\{}
    \hlstd{ans} \hlkwb{<-} \hlkwd{oc_analyses_m4FourCuts_FS4}\hlstd{(sim)}
    \hlkwd{return}\hlstd{(ans)}
\hlstd{\}}
\end{alltt}
\begin{verbatim}
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 49.01796 2 
##    leaf.node control.mean control.size control.se depth
## 1          2         3.52        62.00       3.58     1
## 2          3        -4.64       638.00       1.13     1
## 11         4         4.01        80.00       2.80     2
## 3          6         5.46        61.00       3.60     2
## 4          7        -5.70       537.00       1.25     2
##   leaf.node control.mean control.size control.se depth
## 3         6         5.46        61.00       3.60     2
## GRF subgroup NOT found 
## NO GRF cuts meeting delta(RMST): dmin.grf= 12 
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## Default cuts included (1st 20) 
## Categorical: z1 z2 z3 z4 z5 grade3 
## # of candidate subgroup factors= 25 
##  [1] "size <= 29.4"   "size <= 25"     "size <= 20"     "size <= 35"    
##  [5] "noise1 <= 0"    "noise1 <= -0.6" "noise1 <= 0.7"  "noise2 <= 0"   
##  [9] "noise2 <= -0.8" "noise2 <= 0.7"  "noise3 <= 0"    "noise3 <= -0.7"
## [13] "noise3 <= 0.6"  "noise4 <= 0"    "noise4 <= -0.7" "noise4 <= 0.7" 
## [17] "noise5 <= 0"    "noise5 <= -0.6" "noise5 <= 0.7"  "z1"            
## [21] "z2"             "z3"             "z4"             "z5"            
## [25] "grade3"        
## Number of factors evaluated= 25 
## Confounders per grf screening q21 q16 q23 q9 q17 q4 q6 q11 q24 q22 q19 q8 q7 q14 q18 q25 q20 q13 q12 q3 q5 q10 q2 q1 q15 
##           Factors Labels VI(grf)
## 21             z2    q21  0.1198
## 16  noise4 <= 0.7    q16  0.0876
## 23             z4    q23  0.0666
## 9  noise2 <= -0.8     q9  0.0574
## 17    noise5 <= 0    q17  0.0564
## 4      size <= 35     q4  0.0554
## 6  noise1 <= -0.6     q6  0.0461
## 11    noise3 <= 0    q11  0.0385
## 24             z5    q24  0.0377
## 22             z3    q22  0.0362
## 19  noise5 <= 0.7    q19  0.0344
## 8     noise2 <= 0     q8  0.0333
## 7   noise1 <= 0.7     q7  0.0313
## 14    noise4 <= 0    q14  0.0282
## 18 noise5 <= -0.6    q18  0.0272
## 25         grade3    q25  0.0267
## 20             z1    q20  0.0262
## 13  noise3 <= 0.6    q13  0.0259
## 12 noise3 <= -0.7    q12  0.0254
## 3      size <= 20     q3  0.0253
## 5     noise1 <= 0     q5  0.0244
## 10  noise2 <= 0.7    q10  0.0244
## 2      size <= 25     q2  0.0233
## 1    size <= 29.4     q1  0.0230
## 15 noise4 <= -0.7    q15  0.0194
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1275 
## Approximately 5% of max_count met: minutes 0.002466667 
## Approximately 10% of max_count met: minutes 0.0048 
## Approximately 20% of max_count met: minutes 0.00885 
## Approximately 33% of max_count met: minutes 0.0143 
## Approximately 50% of max_count met: minutes 0.02125 
## Approximately 75% of max_count met: minutes 0.03253333 
## Approximately 90% of max_count met: minutes 0.03826667 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1275 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 58 83 
## # of subgroups with sample size less than criteria 136 
## # of subgroups meeting all criteria = 1117 
## # of subgroups fitted (Cox model estimable) = 1117 
## *Subgroup Searching Minutes=* 0.04188333 
## Number of subgroups meeting HR threshold 2 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  2 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##    n  E d1   HR L(HR) q21.0 q21.1
## 1 82 31 19 1.49  0.72     0     0
## 2 86 41 24 1.31  0.70     0     0
## Consistency 0.7075 
## Consistency 0.6075 
## Subgroup Consistency Minutes= 0.04793333 
## NO subgroup found (FS) 
## Minutes forestsearch overall= 0.1108167 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 49.01796 2 
##    leaf.node control.mean control.size control.se depth
## 1          2         3.52        62.00       3.58     1
## 2          3        -4.64       638.00       1.13     1
## 11         4         4.01        80.00       2.80     2
## 3          6         5.46        61.00       3.60     2
## 4          7        -5.70       537.00       1.25     2
##   leaf.node control.mean control.size control.se depth
## 3         6         5.46        61.00       3.60     2
## GRF subgroup NOT found 
## NO GRF cuts meeting delta(RMST): dmin.grf= 12 
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## CV lambda = 0.02832378 
## 12 x 1 sparse Matrix of class "dgCMatrix"
##                 s0
## z1      0.06989458
## z2      .         
## z3      .         
## z4      0.48246098
## z5     -0.74548621
## size    .         
## grade3  .         
## noise1 -0.03624845
## noise2  .         
## noise3  .         
## noise4  .         
## noise5  .         
## Cox-LASSO selected: z1 z4 z5 noise1 
## Cox-LASSO not selected: z2 z3 size grade3 noise2 noise3 noise4 noise5 
## Default cuts included from Lasso: 
## Categorical after Lasso: z1 z4 z5 
## # of candidate subgroup factors= 22 
##  [1] "size <= 29.4"   "size <= 25"     "size <= 20"     "size <= 35"    
##  [5] "noise1 <= 0"    "noise1 <= -0.6" "noise1 <= 0.7"  "noise2 <= 0"   
##  [9] "noise2 <= -0.8" "noise2 <= 0.7"  "noise3 <= 0"    "noise3 <= -0.7"
## [13] "noise3 <= 0.6"  "noise4 <= 0"    "noise4 <= -0.7" "noise4 <= 0.7" 
## [17] "noise5 <= 0"    "noise5 <= -0.6" "noise5 <= 0.7"  "z1"            
## [21] "z4"             "z5"            
## Number of factors evaluated= 22 
## Confounders per grf screening q16 q21 q9 q4 q17 q6 q22 q11 q7 q8 q19 q10 q14 q20 q13 q12 q5 q2 q18 q3 q1 q15 
##           Factors Labels VI(grf)
## 16  noise4 <= 0.7    q16  0.1003
## 21             z4    q21  0.0846
## 9  noise2 <= -0.8     q9  0.0733
## 4      size <= 35     q4  0.0661
## 17    noise5 <= 0    q17  0.0593
## 6  noise1 <= -0.6     q6  0.0527
## 22             z5    q22  0.0490
## 11    noise3 <= 0    q11  0.0463
## 7   noise1 <= 0.7     q7  0.0423
## 8     noise2 <= 0     q8  0.0400
## 19  noise5 <= 0.7    q19  0.0386
## 10  noise2 <= 0.7    q10  0.0365
## 14    noise4 <= 0    q14  0.0365
## 20             z1    q20  0.0350
## 13  noise3 <= 0.6    q13  0.0343
## 12 noise3 <= -0.7    q12  0.0338
## 5     noise1 <= 0     q5  0.0329
## 2      size <= 25     q2  0.0308
## 18 noise5 <= -0.6    q18  0.0294
## 3      size <= 20     q3  0.0283
## 1    size <= 29.4     q1  0.0263
## 15 noise4 <= -0.7    q15  0.0237
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 990 
## Approximately 5% of max_count met: minutes 0.004383333 
## Approximately 10% of max_count met: minutes 0.005716667 
## Approximately 20% of max_count met: minutes 0.009733333 
## Approximately 33% of max_count met: minutes 0.01348333 
## Approximately 50% of max_count met: minutes 0.01908333 
## Approximately 75% of max_count met: minutes 0.0273 
## Approximately 90% of max_count met: minutes 0.03196667 
## # of subgroups evaluated based on (up to) maxk-factor combinations 990 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 51 74 
## # of subgroups with sample size less than criteria 118 
## # of subgroups meeting all criteria = 851 
## # of subgroups fitted (Cox model estimable) = 851 
## *Subgroup Searching Minutes=* 0.03506667 
## Number of subgroups meeting HR threshold 2 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  2 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##    n  E d1   HR L(HR) q16.0 q16.1
## 1 82 31 19 1.49  0.72     0     0
## 2 86 41 24 1.31  0.70     0     0
## Consistency 0.7075 
## Consistency 0.6075 
## Subgroup Consistency Minutes= 0.04836667 
## NO subgroup found (FS) 
## Minutes forestsearch overall= 0.09476667 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 50.12699 2 
##   leaf.node control.mean control.size control.se depth
## 1         2        -4.38       459.00       1.29     1
## 2         3         2.57       241.00       1.72     1
## 3         4        -4.53       274.00       1.59     2
## 4         5         7.08       111.00       2.53     2
## 5         6        -5.59       255.00       1.74     2
## 6         7         8.16        60.00       3.56     2
##   leaf.node control.mean control.size control.se depth
## 6         7         8.16        60.00       3.56     2
## GRF subgroup found 
## All splits 
## [1] "size <= 27"     "size <= 23"     "noise5 <= 0.97"
## Terminating node at max.diff (sg.harm.id) 
## [1] "noise5 <= 0.967882438461809"
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## Default cuts included (1st 20) 
## Categorical: z1 z2 z3 z4 z5 grade3 
## Factors per GRF: size <= 27 size <= 23 noise5 <= 0.97 
## Initial GRF cuts included size <= 27 size <= 23 noise5 <= 0.97 
## # of candidate subgroup factors= 29 
##  [1] "size <= 27"     "size <= 23"     "noise5 <= 0.97" "size <= 29.9"  
##  [5] "size <= 25"     "size <= 21"     "size <= 35"     "noise1 <= 0"   
##  [9] "noise1 <= -0.7" "noise1 <= 0.7"  "noise2 <= 0"    "noise2 <= -0.7"
## [13] "noise2 <= 0.7"  "noise3 <= -0.1" "noise3 <= -0.7" "noise3 <= 0.6" 
## [17] "noise4 <= -0.1" "noise4 <= 0"    "noise4 <= -0.8" "noise4 <= 0.6" 
## [21] "noise5 <= 0"    "noise5 <= -0.7" "noise5 <= 0.8"  "z1"            
## [25] "z2"             "z3"             "z4"             "z5"            
## [29] "grade3"        
## Number of factors evaluated= 29 
## Confounders per grf screening q6 q11 q2 q23 q13 q21 q3 q16 q1 q28 q12 q14 q27 q10 q8 q25 q26 q15 q22 q9 q29 q20 q7 q24 q19 q4 q18 q17 q5 
##           Factors Labels VI(grf)
## 6      size <= 21     q6  0.1014
## 11    noise2 <= 0    q11  0.0850
## 2      size <= 23     q2  0.0796
## 23  noise5 <= 0.8    q23  0.0432
## 13  noise2 <= 0.7    q13  0.0399
## 21    noise5 <= 0    q21  0.0389
## 3  noise5 <= 0.97     q3  0.0381
## 16  noise3 <= 0.6    q16  0.0347
## 1      size <= 27     q1  0.0344
## 28             z5    q28  0.0343
## 12 noise2 <= -0.7    q12  0.0336
## 14 noise3 <= -0.1    q14  0.0336
## 27             z4    q27  0.0331
## 10  noise1 <= 0.7    q10  0.0312
## 8     noise1 <= 0     q8  0.0291
## 25             z2    q25  0.0283
## 26             z3    q26  0.0274
## 15 noise3 <= -0.7    q15  0.0273
## 22 noise5 <= -0.7    q22  0.0264
## 9  noise1 <= -0.7     q9  0.0242
## 29         grade3    q29  0.0237
## 20  noise4 <= 0.6    q20  0.0232
## 7      size <= 35     q7  0.0231
## 24             z1    q24  0.0229
## 19 noise4 <= -0.8    q19  0.0219
## 4    size <= 29.9     q4  0.0182
## 18    noise4 <= 0    q18  0.0177
## 17 noise4 <= -0.1    q17  0.0161
## 5      size <= 25     q5  0.0096
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1711 
## Approximately 5% of max_count met: minutes 0.005833333 
## Approximately 10% of max_count met: minutes 0.009366667 
## Approximately 20% of max_count met: minutes 0.02213333 
## Approximately 33% of max_count met: minutes 0.0318 
## Approximately 50% of max_count met: minutes 0.04475 
## Approximately 75% of max_count met: minutes 0.06516667 
## Approximately 90% of max_count met: minutes 0.07793333 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1711 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 88 100 
## # of subgroups with sample size less than criteria 178 
## # of subgroups meeting all criteria = 1494 
## # of subgroups fitted (Cox model estimable) = 1494 
## *Subgroup Searching Minutes=* 0.0846 
## Number of subgroups meeting HR threshold 33 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  33 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##      n  E d1   HR L(HR) q6.0 q6.1 q11.0 q11.1 q2.0 q2.1 q23.0 q23.1 q13.0 q13.1
## 1  111 62 41 1.77  1.04    0    0     0     0    1    0     0     0     0     0
## 2   86 46 29 1.71  0.94    0    0     0     0    1    0     0     0     0     0
## 3   70 49 25 1.59  0.90    0    0     0     0    0    0     1     0     0     0
## 4   82 42 27 1.55  0.82    0    0     0     0    0    0     0     0     0     0
## 5   79 49 28 1.53  0.87    0    0     0     0    0    0     0     0     0     0
## 6   87 50 30 1.48  0.84    0    0     0     0    0    0     0     0     0     0
## 7  112 63 38 1.47  0.89    0    0     0     0    1    0     0     0     0     0
## 8  106 68 35 1.46  0.90    0    0     0     0    1    0     1     0     0     0
## 9   94 50 29 1.46  0.83    0    0     1     0    0    0     0     0     0     0
## 10  84 53 23 1.45  0.84    0    0     0     0    0    0     1     0     0     0
## Consistency 0.9775 
## # of splits= 400 
## Model, % Consistency Met= !{size <= 23} {size <= 27} 0.9775 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.03136667 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.1343833 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 50.12699 2 
##   leaf.node control.mean control.size control.se depth
## 1         2        -4.38       459.00       1.29     1
## 2         3         2.57       241.00       1.72     1
## 3         4        -4.53       274.00       1.59     2
## 4         5         7.08       111.00       2.53     2
## 5         6        -5.59       255.00       1.74     2
## 6         7         8.16        60.00       3.56     2
##   leaf.node control.mean control.size control.se depth
## 6         7         8.16        60.00       3.56     2
## GRF subgroup found 
## All splits 
## [1] "size <= 27"     "size <= 23"     "noise5 <= 0.97"
## Terminating node at max.diff (sg.harm.id) 
## [1] "noise5 <= 0.967882438461809"
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## CV lambda = 0.01780769 
## 12 x 1 sparse Matrix of class "dgCMatrix"
##                  s0
## z1      0.105318092
## z2     -0.164164016
## z3      .          
## z4      0.665301094
## z5     -0.746687283
## size    0.003162630
## grade3  .          
## noise1  0.007184574
## noise2 -0.023535977
## noise3  .          
## noise4  .          
## noise5  0.021153387
## Cox-LASSO selected: z1 z2 z4 z5 size noise1 noise2 noise5 
## Cox-LASSO not selected: z3 grade3 noise3 noise4 
## Default cuts included from Lasso: 
## Categorical after Lasso: z1 z2 z4 z5 
## Factors per GRF: size <= 27 size <= 23 noise5 <= 0.97 
## Initial GRF cuts included size <= 27 size <= 23 noise5 <= 0.97 
## Factors included per GRF (not in lasso) size <= 27 size <= 23 noise5 <= 0.97 
## # of candidate subgroup factors= 27 
##  [1] "size <= 27"     "size <= 23"     "noise5 <= 0.97" "size <= 29.9"  
##  [5] "size <= 25"     "size <= 21"     "size <= 35"     "noise1 <= 0"   
##  [9] "noise1 <= -0.7" "noise1 <= 0.7"  "noise2 <= 0"    "noise2 <= -0.7"
## [13] "noise2 <= 0.7"  "noise3 <= -0.1" "noise3 <= -0.7" "noise3 <= 0.6" 
## [17] "noise4 <= -0.1" "noise4 <= 0"    "noise4 <= -0.8" "noise4 <= 0.6" 
## [21] "noise5 <= 0"    "noise5 <= -0.7" "noise5 <= 0.8"  "z1"            
## [25] "z2"             "z4"             "z5"            
## Number of factors evaluated= 27 
## Confounders per grf screening q6 q11 q2 q23 q3 q13 q21 q27 q1 q16 q12 q25 q26 q8 q14 q10 q15 q9 q7 q20 q22 q24 q19 q18 q4 q17 q5 
##           Factors Labels VI(grf)
## 6      size <= 21     q6  0.0914
## 11    noise2 <= 0    q11  0.0873
## 2      size <= 23     q2  0.0796
## 23  noise5 <= 0.8    q23  0.0489
## 3  noise5 <= 0.97     q3  0.0423
## 13  noise2 <= 0.7    q13  0.0423
## 21    noise5 <= 0    q21  0.0408
## 27             z5    q27  0.0395
## 1      size <= 27     q1  0.0382
## 16  noise3 <= 0.6    q16  0.0370
## 12 noise2 <= -0.7    q12  0.0362
## 25             z2    q25  0.0356
## 26             z4    q26  0.0351
## 8     noise1 <= 0     q8  0.0338
## 14 noise3 <= -0.1    q14  0.0337
## 10  noise1 <= 0.7    q10  0.0296
## 15 noise3 <= -0.7    q15  0.0282
## 9  noise1 <= -0.7     q9  0.0279
## 7      size <= 35     q7  0.0273
## 20  noise4 <= 0.6    q20  0.0254
## 22 noise5 <= -0.7    q22  0.0249
## 24             z1    q24  0.0245
## 19 noise4 <= -0.8    q19  0.0244
## 18    noise4 <= 0    q18  0.0206
## 4    size <= 29.9     q4  0.0182
## 17 noise4 <= -0.1    q17  0.0174
## 5      size <= 25     q5  0.0100
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1485 
## Approximately 5% of max_count met: minutes 0.004266667 
## Approximately 10% of max_count met: minutes 0.007183333 
## Approximately 20% of max_count met: minutes 0.01481667 
## Approximately 33% of max_count met: minutes 0.02423333 
## Approximately 50% of max_count met: minutes 0.03758333 
## Approximately 75% of max_count met: minutes 0.05561667 
## Approximately 90% of max_count met: minutes 0.06548333 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1485 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 83 94 
## # of subgroups with sample size less than criteria 159 
## # of subgroups meeting all criteria = 1288 
## # of subgroups fitted (Cox model estimable) = 1288 
## *Subgroup Searching Minutes=* 0.07165 
## Number of subgroups meeting HR threshold 27 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  27 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##      n  E d1   HR L(HR) q6.0 q6.1 q11.0 q11.1 q2.0 q2.1 q23.0 q23.1 q3.0 q3.1
## 1  111 62 41 1.77  1.04    0    0     0     0    1    0     0     0    0    0
## 2   86 46 29 1.71  0.94    0    0     0     0    1    0     0     0    0    0
## 3   70 49 25 1.59  0.90    0    0     0     0    0    0     1     0    0    0
## 4   82 42 27 1.55  0.82    0    0     0     0    0    0     0     0    0    0
## 5   87 50 30 1.48  0.84    0    0     0     0    0    0     0     0    0    0
## 6  112 63 38 1.47  0.89    0    0     0     0    1    0     0     0    0    0
## 7  106 68 35 1.46  0.90    0    0     0     0    1    0     1     0    0    0
## 8   94 50 29 1.46  0.83    0    0     1     0    0    0     0     0    0    0
## 9   84 53 23 1.45  0.84    0    0     0     0    0    0     1     0    0    0
## 10  76 43 25 1.43  0.78    0    0     0     0    0    0     0     0    0    0
## Consistency 0.9775 
## # of splits= 400 
## Model, % Consistency Met= !{size <= 23} {size <= 27} 0.9775 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.03141667 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.1174667 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 48.57937 2 
##   leaf.node control.mean control.size control.se depth
## 1         2         1.92       108.00       2.51     1
## 2         3        -5.69       592.00       1.20     1
## 3         4         7.18        84.00       2.86     2
## 4         5        -9.56       106.00       2.66     2
## 5         6        -6.00       496.00       1.30     2
##   leaf.node control.mean control.size control.se depth
## 3         4         7.18        84.00       2.86     2
## GRF subgroup found 
## All splits 
## [1] "size <= 20"     "z2 <= 0"        "noise2 <= 2.01"
## Terminating node at max.diff (sg.harm.id) 
## [1] "z2 <= 0"
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## Default cuts included (1st 20) 
## Categorical: z1 z2 z3 z4 z5 grade3 
## Factors per GRF: size <= 20 z2 <= 0 noise2 <= 2.01 
## Initial GRF cuts included size <= 20 z2 <= 0 noise2 <= 2.01 
## # of candidate subgroup factors= 28 
##  [1] "size <= 20"     "noise2 <= 2.01" "size <= 28.8"   "size <= 25"    
##  [5] "size <= 35"     "noise1 <= -0.1" "noise1 <= 0"    "noise1 <= -0.7"
##  [9] "noise1 <= 0.6"  "noise2 <= 0"    "noise2 <= -0.7" "noise2 <= 0.7" 
## [13] "noise3 <= 0"    "noise3 <= -0.7" "noise3 <= 0.7"  "noise4 <= 0"   
## [17] "noise4 <= -0.1" "noise4 <= -0.7" "noise4 <= 0.6"  "noise5 <= 0"   
## [21] "noise5 <= -0.6" "noise5 <= 0.7"  "z1"             "z2"            
## [25] "z3"             "z4"             "z5"             "grade3"        
## Number of factors evaluated= 28 
## Confounders per grf screening q24 q5 q1 q10 q18 q27 q26 q20 q13 q4 q11 q21 q28 q12 q25 q6 q16 q8 q19 q15 q3 q7 q17 q22 q23 q9 q14 q2 
##           Factors Labels VI(grf)
## 24             z2    q24  0.2236
## 5      size <= 35     q5  0.0892
## 1      size <= 20     q1  0.0653
## 10    noise2 <= 0    q10  0.0504
## 18 noise4 <= -0.7    q18  0.0465
## 27             z5    q27  0.0397
## 26             z4    q26  0.0320
## 20    noise5 <= 0    q20  0.0289
## 13    noise3 <= 0    q13  0.0282
## 4      size <= 25     q4  0.0276
## 11 noise2 <= -0.7    q11  0.0256
## 21 noise5 <= -0.6    q21  0.0253
## 28         grade3    q28  0.0251
## 12  noise2 <= 0.7    q12  0.0235
## 25             z3    q25  0.0234
## 6  noise1 <= -0.1     q6  0.0230
## 16    noise4 <= 0    q16  0.0229
## 8  noise1 <= -0.7     q8  0.0226
## 19  noise4 <= 0.6    q19  0.0221
## 15  noise3 <= 0.7    q15  0.0215
## 3    size <= 28.8     q3  0.0207
## 7     noise1 <= 0     q7  0.0205
## 17 noise4 <= -0.1    q17  0.0201
## 22  noise5 <= 0.7    q22  0.0200
## 23             z1    q23  0.0194
## 9   noise1 <= 0.6     q9  0.0169
## 14 noise3 <= -0.7    q14  0.0158
## 2  noise2 <= 2.01     q2  0.0000
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1596 
## Approximately 5% of max_count met: minutes 0.00455 
## Approximately 10% of max_count met: minutes 0.008 
## Approximately 20% of max_count met: minutes 0.01526667 
## Approximately 33% of max_count met: minutes 0.02431667 
## Approximately 50% of max_count met: minutes 0.03588333 
## Approximately 75% of max_count met: minutes 0.05268333 
## Approximately 90% of max_count met: minutes 0.0627 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1596 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 125 135 
## # of subgroups with sample size less than criteria 202 
## # of subgroups meeting all criteria = 1358 
## # of subgroups fitted (Cox model estimable) = 1358 
## *Subgroup Searching Minutes=* 0.0689 
## Number of subgroups meeting HR threshold 3 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  3 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##     n  E d1   HR L(HR) q24.0 q24.1 q5.0
## 1  84 40 25 1.91  1.00     1     0    0
## 2  94 45 26 1.35  0.75     0     0    0
## 3 107 53 29 1.30  0.76     0     0    0
## Consistency 0.9675 
## # of splits= 400 
## Model, % Consistency Met= !{z2} {size <= 20} 0.9675 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.02998333 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.1129167 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 48.57937 2 
##   leaf.node control.mean control.size control.se depth
## 1         2         1.92       108.00       2.51     1
## 2         3        -5.69       592.00       1.20     1
## 3         4         7.18        84.00       2.86     2
## 4         5        -9.56       106.00       2.66     2
## 5         6        -6.00       496.00       1.30     2
##   leaf.node control.mean control.size control.se depth
## 3         4         7.18        84.00       2.86     2
## GRF subgroup found 
## All splits 
## [1] "size <= 20"     "z2 <= 0"        "noise2 <= 2.01"
## Terminating node at max.diff (sg.harm.id) 
## [1] "z2 <= 0"
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## CV lambda = 0.01121433 
## 12 x 1 sparse Matrix of class "dgCMatrix"
##                   s0
## z1      0.2411784135
## z2     -0.3170179576
## z3      0.2830020629
## z4      0.6704133509
## z5     -0.7604110205
## size   -0.0001740549
## grade3  .           
## noise1 -0.0016979619
## noise2  .           
## noise3  0.0288498998
## noise4  0.0900180826
## noise5 -0.0961930750
## Cox-LASSO selected: z1 z2 z3 z4 z5 size noise1 noise3 noise4 noise5 
## Cox-LASSO not selected: grade3 noise2 
## Default cuts included from Lasso: 
## Categorical after Lasso: z1 z2 z3 z4 z5 
## Factors per GRF: size <= 20 z2 <= 0 noise2 <= 2.01 
## Initial GRF cuts included size <= 20 z2 <= 0 noise2 <= 2.01 
## Factors included per GRF (not in lasso) size <= 20 noise2 <= 2.01 
## # of candidate subgroup factors= 27 
##  [1] "size <= 20"     "noise2 <= 2.01" "size <= 28.8"   "size <= 25"    
##  [5] "size <= 35"     "noise1 <= -0.1" "noise1 <= 0"    "noise1 <= -0.7"
##  [9] "noise1 <= 0.6"  "noise2 <= 0"    "noise2 <= -0.7" "noise2 <= 0.7" 
## [13] "noise3 <= 0"    "noise3 <= -0.7" "noise3 <= 0.7"  "noise4 <= 0"   
## [17] "noise4 <= -0.1" "noise4 <= -0.7" "noise4 <= 0.6"  "noise5 <= 0"   
## [21] "noise5 <= -0.6" "noise5 <= 0.7"  "z1"             "z2"            
## [25] "z3"             "z4"             "z5"            
## Number of factors evaluated= 27 
## Confounders per grf screening q24 q5 q1 q10 q18 q27 q26 q11 q12 q20 q13 q21 q25 q23 q6 q19 q4 q15 q16 q8 q7 q9 q22 q3 q17 q14 q2 
##           Factors Labels VI(grf)
## 24             z2    q24  0.2367
## 5      size <= 35     q5  0.0900
## 1      size <= 20     q1  0.0764
## 10    noise2 <= 0    q10  0.0550
## 18 noise4 <= -0.7    q18  0.0418
## 27             z5    q27  0.0385
## 26             z4    q26  0.0324
## 11 noise2 <= -0.7    q11  0.0298
## 12  noise2 <= 0.7    q12  0.0284
## 20    noise5 <= 0    q20  0.0270
## 13    noise3 <= 0    q13  0.0268
## 21 noise5 <= -0.6    q21  0.0262
## 25             z3    q25  0.0248
## 23             z1    q23  0.0239
## 6  noise1 <= -0.1     q6  0.0233
## 19  noise4 <= 0.6    q19  0.0233
## 4      size <= 25     q4  0.0227
## 15  noise3 <= 0.7    q15  0.0226
## 16    noise4 <= 0    q16  0.0216
## 8  noise1 <= -0.7     q8  0.0205
## 7     noise1 <= 0     q7  0.0203
## 9   noise1 <= 0.6     q9  0.0191
## 22  noise5 <= 0.7    q22  0.0185
## 3    size <= 28.8     q3  0.0172
## 17 noise4 <= -0.1    q17  0.0170
## 14 noise3 <= -0.7    q14  0.0162
## 2  noise2 <= 2.01     q2  0.0000
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1485 
## Approximately 5% of max_count met: minutes 0.003983333 
## Approximately 10% of max_count met: minutes 0.007316667 
## Approximately 20% of max_count met: minutes 0.01383333 
## Approximately 33% of max_count met: minutes 0.02183333 
## Approximately 50% of max_count met: minutes 0.0323 
## Approximately 75% of max_count met: minutes 0.049 
## Approximately 90% of max_count met: minutes 0.05791667 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1485 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 120 130 
## # of subgroups with sample size less than criteria 186 
## # of subgroups meeting all criteria = 1263 
## # of subgroups fitted (Cox model estimable) = 1263 
## *Subgroup Searching Minutes=* 0.06343333 
## Number of subgroups meeting HR threshold 3 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  3 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##     n  E d1   HR L(HR) q24.0 q24.1 q5.0
## 1  84 40 25 1.91  1.00     1     0    0
## 2  94 45 26 1.35  0.75     0     0    0
## 3 107 53 29 1.30  0.76     0     0    0
## Consistency 0.9675 
## # of splits= 400 
## Model, % Consistency Met= !{z2} {size <= 20} 0.9675 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.03168333 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.108
\end{verbatim}
\begin{alltt}
\hlstd{t.now} \hlkwb{<-} \hlkwd{proc.time}\hlstd{()[}\hlnum{3}\hlstd{]}
\hlstd{t.min} \hlkwb{<-} \hlstd{(t.now} \hlopt{-} \hlstd{t.start)}\hlopt{/}\hlnum{60}

\hlkwd{print}\hlstd{(}\hlkwd{table}\hlstd{(res}\hlopt{$}\hlstd{analysis))}
\end{alltt}
\begin{verbatim}
## 
##     FSl    FSlg     GRF  GRF.60  VT(24)  VT(36) VT#(24) VT#(36) 
##    1000    1000    1000    1000    1000    1000    1000    1000
\end{verbatim}
\begin{alltt}
\hlstd{check} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlkwd{c}\hlstd{(}\hlkwd{table}\hlstd{(res}\hlopt{$}\hlstd{analysis))} \hlopt{-} \hlstd{Nsims)}
\hlkwa{if} \hlstd{(}\hlkwd{all}\hlstd{(check} \hlopt{!=} \hlnum{0}\hlstd{))} \hlkwd{stop}\hlstd{(}\hlstr{"All analyses not complete"}\hlstd{)}

\hlstd{dgm_alt} \hlkwb{<-} \hlstd{dgm}
\hlstd{outres} \hlkwb{<-} \hlkwd{out.results}\hlstd{(}\hlkwc{res} \hlstd{= res,} \hlkwc{dgm} \hlstd{= dgm,} \hlkwc{output.file} \hlstd{= output.file,} \hlkwc{t.min} \hlstd{= t.min,}
    \hlkwc{out_analysis} \hlstd{=} \hlstr{"FSl"}\hlstd{)}
\end{alltt}
\begin{verbatim}
## [1] "results/oc_sims=1000_m4a-Noise=5_N=700_null_ktreat=0.9_v0B-4cuts.Rdata"
##      sim sizeH_true propH_true sizeHc_true propHc_true any.H size.H size.Hc
##    <int>      <num>      <num>       <int>       <num> <num>  <num>   <int>
## 1:     1          0          0         700           1     0      0     700
## 2:     1          0          0         700           1     0      0     700
## 3:     1          0          0         700           1     1     69     631
## 4:     1          0          0         700           1     0      0     700
## 5:     1          0          0         700           1     0      0     700
## 6:     1          0          0         700           1     0      0     700
##       ppv       npv specificity sensitivity found.1 found.2 found.both
##    <lgcl>     <num>       <num>       <num>   <int>   <int>      <num>
## 1:     NA 1.0000000           1          NA       0       0          0
## 2:     NA 1.0000000           1          NA       0       0          0
## 3:     NA 0.9014286           1           0      NA      NA         NA
## 4:     NA 1.0000000           1          NA      NA      NA         NA
## 5:     NA 1.0000000           1          NA       0       0          0
## 6:     NA 1.0000000           1          NA       0       0          0
##    found.al3 hr.H.true hr.Hc.true hr.H.hat hr.Hc.hat   b1.H   b2.H       b1.Hc
##        <num>    <lgcl>      <num>    <num>     <num> <lgcl> <lgcl>       <num>
## 1:         0        NA  0.6155054       NA 0.6155054     NA     NA  0.00000000
## 2:         0        NA  0.6155054       NA 0.6155054     NA     NA  0.00000000
## 3:        NA        NA  0.6155054 2.406676 0.5325424     NA     NA -0.08296298
## 4:        NA        NA  0.6155054       NA 0.6155054     NA     NA  0.00000000
## 5:         0        NA  0.6155054       NA 0.6155054     NA     NA  0.00000000
## 6:         0        NA  0.6155054       NA 0.6155054     NA     NA  0.00000000
##          b2.Hc    p.cens analysis   taumax    hr.itt     l.itt    u.itt
##          <num>     <num>   <char>    <num>     <num>     <num>    <num>
## 1: -0.08552157 0.4642857      FSl 81.69660 0.6155054 0.5014207 0.755547
## 2: -0.08552157 0.4642857     FSlg 49.01796 0.6155054 0.5014207 0.755547
## 3: -0.16848455 0.4642857      GRF 81.69660 0.6155054 0.5014207 0.755547
## 4: -0.08552157 0.4642857   GRF.60 49.01796 0.6155054 0.5014207 0.755547
## 5: -0.08552157 0.4642857   VT(24) 81.69660 0.6155054 0.5014207 0.755547
## 6: -0.08552157 0.4642857  VT#(24) 81.69660 0.6155054 0.5014207 0.755547
##    hr.adj.itt l.adj.itt u.adj.itt l.H.true u.H.true l.Hc.true u.Hc.true
##         <num>     <num>     <num>   <lgcl>   <lgcl>     <num>     <num>
## 1:  0.5906047  0.480604 0.7257825       NA       NA 0.5014207  0.755547
## 2:  0.5906047  0.480604 0.7257825       NA       NA 0.5014207  0.755547
## 3:  0.5906047  0.480604 0.7257825       NA       NA 0.5014207  0.755547
## 4:  0.5906047  0.480604 0.7257825       NA       NA 0.5014207  0.755547
## 5:  0.5906047  0.480604 0.7257825       NA       NA 0.5014207  0.755547
## 6:  0.5906047  0.480604 0.7257825       NA       NA 0.5014207  0.755547
##     l.H.hat  u.H.hat  l.Hc.hat  u.Hc.hat
##       <num>    <num>     <num>     <num>
## 1:       NA       NA 0.5014207 0.7555470
## 2:       NA       NA 0.5014207 0.7555470
## 3: 1.043941 5.548289 0.4297038 0.6599928
## 4:       NA       NA 0.5014207 0.7555470
## 5:       NA       NA 0.5014207 0.7555470
## 6:       NA       NA 0.5014207 0.7555470
## Subgroup HRs: H, H^c, Causal= NA 0.701027 0.701027 
## Simulations= 1000 
## Avg censoring= 0.4613314 
## Min,Max,Avg tau.max= 72.81026 83.95272 81.68616 
## P(H) approximation at causal(Hrc), n=60, approx= 0.701027 0.03392115 
## P(H) approximation at plim(Hrc), n=60, approx= 0.7071011 0.03573494 
## Minutes,hours 14.61 0.2435 
##                    FSl    FSlg     GRF  GRF.60  VT(24) VT#(24)  VT(36) VT#(36)
## any.H            0.370   0.340   0.710   0.380   0.040   0.010   0.050   0.020
## sensH              NaN     NaN     NaN     NaN     NaN     NaN     NaN     NaN
## sensHc           0.950   0.960   0.900   0.950   1.000   1.000   0.990   1.000
## ppH              0.000   0.000   0.000   0.000   0.000   0.000   0.000   0.000
## ppHc             1.000   1.000   1.000   1.000   1.000   1.000   1.000   1.000
## Avg(#H)         88.000  88.000  95.000  82.000  81.000  81.000  74.000  69.000
## minH            61.000  61.000  60.000  60.000  60.000  63.000  60.000  60.000
## maxH           276.000 276.000 233.000 172.000 152.000 120.000 115.000  96.000
## Avg(#Hc)       668.000 670.000 633.000 668.000 697.000 699.000 696.000 698.000
## minHc          424.000 424.000 467.000 528.000 548.000 580.000 585.000 604.000
## maxHc          700.000 700.000 700.000 700.000 700.000 700.000 700.000 700.000
## hat(H*)            NaN     NaN     NaN     NaN     NaN     NaN     NaN     NaN
## hat(hat[H])      1.892   1.894   1.717   1.553   1.411   1.398   1.280   1.483
## hat(Hc*)         0.748   0.749   0.723   0.719   0.734   0.755   0.717   0.750
## hat(hat[Hc])     0.661   0.662   0.635   0.651   0.679   0.698   0.674   0.697
## hat(H*)all         NaN     NaN     NaN     NaN     NaN     NaN     NaN     NaN
## hat(Hc*)all      0.707   0.707   0.707   0.707   0.707   0.707   0.707   0.707
## hat(ITT)all      0.707   0.707   0.707   0.707   0.707   0.707   0.707   0.707
## hat(ITTadj)all   0.666   0.666   0.666   0.666   0.666   0.666   0.666   0.666
\end{verbatim}
\begin{alltt}
\hlstd{missC} \hlkwb{<-} \hlkwd{tab_tests}\hlstd{(}\hlkwc{res} \hlstd{= res)}

\hlstd{pA} \hlkwb{<-} \hlkwd{as.character}\hlstd{(}\hlkwd{round}\hlstd{(outres}\hlopt{$}\hlstd{pAnyH.approx2,} \hlnum{4}\hlstd{))}
\hlstd{tabsim_missC} \hlkwb{<-} \hlkwd{get_tabsim}\hlstd{(}\hlkwc{missC} \hlstd{= missC,} \hlkwc{pA} \hlstd{= pA,} \hlkwc{est_names} \hlstd{= est_names,} \hlkwc{stat_names} \hlstd{= stat_names,}
    \hlkwc{mod.harm} \hlstd{= mod.harm,} \hlkwc{Nsims} \hlstd{= Nsims)}
\end{alltt}
\end{kframe}
\end{knitrout}

\begin{table}[!h]
\centering
\caption{\label{tab:r null}Average classification rates: ${avg}\vert \hat{H} \vert$, ${min}\vert \hat{H} \vert$, and ${max}\vert \hat{H} \vert$, denote the average, 
minimum, and maximum of the number of subjects in the estimated subgroup $\hat{H}$ (analogously for $\hat{H}^{c}$).  
Note that under the null $sens(\hat{H})$ is undefined and $ppv(\hat{H})=0$.}
\centering
\fontsize{9}{11}\selectfont
\begin{tabular}[t]{lcccccccc}
\toprule
  & $FS_{g}$ & $FS_{lg}$ & $GRF$ & $GRF_{60}$ & $VT(24)$ & ${VT}^{\#}(24)$ & $VT(36)$ & ${VT}^{\#}(36)$\\
\midrule
\addlinespace[0.3em]
\multicolumn{9}{l}{\textbf{Finding H}}\\
\hspace{1em}any(H) & 0.37 & 0.34 & 0.71 & 0.38 & 0.04 & 0.01 & 0.05 & 0.02\\
\hspace{1em}${sens}(\hat{H})$ & . & . & . & . & . & . & . & .\\
\hspace{1em}${sens}(\hat{H}^{C})$ & 0.95 & 0.96 & 0.9 & 0.95 & 1 & 1 & 0.99 & 1\\
\hspace{1em}${ppv}(\hat{H})$ & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hspace{1em}${ppv}(\hat{H}^{C})$ & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 1\\
\addlinespace[0.3em]
\multicolumn{9}{l}{\textbf{Size of H and H-complement}}\\
\hspace{1em}${avg}\vert \hat{H} \vert$ & 88 & 88 & 95 & 82 & 81 & 81 & 74 & 69\\
\hspace{1em}${min}\vert \hat{H} \vert$ & 61 & 61 & 60 & 60 & 60 & 63 & 60 & 60\\
\hspace{1em}${max}\vert \hat{H} \vert$ & 276 & 276 & 233 & 172 & 152 & 120 & 115 & 96\\
\hspace{1em}${avg}\vert \hat{H}^{C} \vert$ & 668 & 670 & 633 & 668 & 697 & 699 & 696 & 698\\
\hspace{1em}${min}\vert \hat{H}^{C} \vert$ & 424 & 424 & 467 & 528 & 548 & 580 & 585 & 604\\
\hspace{1em}${max}\vert \hat{H}^{C} \vert$ & 700 & 700 & 700 & 700 & 700 & 700 & 700 & 700\\
\bottomrule
\multicolumn{9}{l}{\rule{0pt}{1em}\textit{Note: } Number of simulations= 1000 .}\\
\multicolumn{9}{l}{\rule{0pt}{1em}\textit{Note: } Probability approximation= 0.0357 .}\\
\end{tabular}
\end{table}




\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{mod.harm} \hlkwb{<-} \hlstr{"alt"}
\hlstd{hrH.target} \hlkwb{<-} \hlnum{2}

\hlstd{this.dgm} \hlkwb{<-} \hlkwd{get.dgm4.OC}\hlstd{(}\hlkwc{mod.harm} \hlstd{= mod.harm,} \hlkwc{N} \hlstd{= N,} \hlkwc{k.treat} \hlstd{= k.treat,} \hlkwc{model.index} \hlstd{= model.index,}
    \hlkwc{sol_tol} \hlstd{=} \hlnum{10}\hlopt{^-}\hlnum{8}\hlstd{,} \hlkwc{hrH.target} \hlstd{= hrH.target,} \hlkwc{cens.type} \hlstd{= cens.type,} \hlkwc{out.loc} \hlstd{= out.loc,}
    \hlkwc{file.index} \hlstd{= file.index,} \hlkwc{details} \hlstd{=} \hlnum{TRUE}\hlstd{,} \hlkwc{parms_torand} \hlstd{=} \hlnum{FALSE}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/r_hrh2-1} 
\begin{kframe}\begin{verbatim}
## Super-population empirical harm and non-harm hazard ratios= 2.000007 0.6466405 
## Causal HR (empirical ITT)= 0.7057463
\end{verbatim}
\begin{alltt}
\hlstd{dgm} \hlkwb{<-} \hlstd{this.dgm}\hlopt{$}\hlstd{dgm}
\hlstd{output.file} \hlkwb{<-} \hlstd{this.dgm}\hlopt{$}\hlstd{out.file}

\hlkwa{if} \hlstd{(}\hlopt{!}\hlkwd{is.null}\hlstd{(output.file)} \hlopt{& !}\hlkwd{grepl}\hlstd{(mod.harm, output.file))} \hlkwd{stop}\hlstd{(}\hlstr{"Wrong file name for mod.harm"}\hlstd{)}

\hlcom{# Show first simulation ans1 <- oc_analyses_m4_FS4(2)}

\hlstd{t.start} \hlkwb{<-} \hlkwd{proc.time}\hlstd{()[}\hlnum{3}\hlstd{]}
\hlstd{res} \hlkwb{<-} \hlkwd{foreach}\hlstd{(}\hlkwc{sim} \hlstd{=} \hlkwd{seq_len}\hlstd{(Nsims),} \hlkwc{.options.future} \hlstd{=} \hlkwd{list}\hlstd{(}\hlkwc{seed} \hlstd{=} \hlnum{TRUE}\hlstd{),} \hlkwc{.combine} \hlstd{=} \hlstr{"rbind"}\hlstd{,}
    \hlkwc{.errorhandling} \hlstd{=} \hlstr{"pass"}\hlstd{)} \hlopt{%dofuture%} \hlstd{\{}
    \hlstd{ans} \hlkwb{<-} \hlkwd{oc_analyses_m4FourCuts_FS4}\hlstd{(sim)}
    \hlkwd{return}\hlstd{(ans)}
\hlstd{\}}
\end{alltt}
\begin{verbatim}
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 48.86072 2 
##   leaf.node control.mean control.size control.se depth
## 1         2        -4.41       509.00       1.23     1
## 2         3         2.52       191.00       2.29     1
## 3         4         2.33        95.00       2.91     2
## 4         5        -5.96       414.00       1.35     2
## 5         6         6.05       146.00       2.62     2
##   leaf.node control.mean control.size control.se depth
## 5         6         6.05       146.00       2.62     2
## GRF subgroup found 
## All splits 
## [1] "z1 <= 0"         "noise2 <= -0.95" "noise2 <= 0.71" 
## Terminating node at max.diff (sg.harm.id) 
## [1] "noise2 <= 0.705836025223127"
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## Default cuts included (1st 20) 
## Categorical: z1 z2 z3 z4 z5 grade3 
## Factors per GRF: z1 <= 0 noise2 <= -0.95 noise2 <= 0.71 
## Initial GRF cuts included z1 <= 0 noise2 <= -0.95 noise2 <= 0.71 
## # of candidate subgroup factors= 27 
##  [1] "noise2 <= -0.95" "noise2 <= 0.71"  "size <= 29.4"    "size <= 25"     
##  [5] "size <= 20"      "size <= 35"      "noise1 <= 0"     "noise1 <= -0.6" 
##  [9] "noise1 <= 0.7"   "noise2 <= 0"     "noise2 <= -0.8"  "noise2 <= 0.7"  
## [13] "noise3 <= 0"     "noise3 <= -0.7"  "noise3 <= 0.6"   "noise4 <= 0"    
## [17] "noise4 <= -0.7"  "noise4 <= 0.7"   "noise5 <= 0"     "noise5 <= -0.6" 
## [21] "noise5 <= 0.7"   "z1"              "z2"              "z3"             
## [25] "z4"              "z5"              "grade3"         
## Number of factors evaluated= 27 
## Confounders per grf screening q23 q24 q22 q1 q18 q19 q25 q26 q13 q6 q8 q16 q11 q21 q5 q10 q7 q27 q3 q4 q9 q15 q14 q17 q2 q20 q12 
##            Factors Labels VI(grf)
## 23              z2    q23  0.2083
## 24              z3    q24  0.1340
## 22              z1    q22  0.1165
## 1  noise2 <= -0.95     q1  0.0734
## 18   noise4 <= 0.7    q18  0.0531
## 19     noise5 <= 0    q19  0.0289
## 25              z4    q25  0.0275
## 26              z5    q26  0.0245
## 13     noise3 <= 0    q13  0.0232
## 6       size <= 35     q6  0.0222
## 8   noise1 <= -0.6     q8  0.0221
## 16     noise4 <= 0    q16  0.0208
## 11  noise2 <= -0.8    q11  0.0198
## 21   noise5 <= 0.7    q21  0.0196
## 5       size <= 20     q5  0.0187
## 10     noise2 <= 0    q10  0.0187
## 7      noise1 <= 0     q7  0.0182
## 27          grade3    q27  0.0176
## 3     size <= 29.4     q3  0.0174
## 4       size <= 25     q4  0.0174
## 9    noise1 <= 0.7     q9  0.0167
## 15   noise3 <= 0.6    q15  0.0161
## 14  noise3 <= -0.7    q14  0.0153
## 17  noise4 <= -0.7    q17  0.0146
## 2   noise2 <= 0.71     q2  0.0140
## 20  noise5 <= -0.6    q20  0.0116
## 12   noise2 <= 0.7    q12  0.0098
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1485 
## Approximately 5% of max_count met: minutes 0.002866667 
## Approximately 10% of max_count met: minutes 0.005483333 
## Approximately 20% of max_count met: minutes 0.01076667 
## Approximately 33% of max_count met: minutes 0.0167 
## Approximately 50% of max_count met: minutes 0.02598333 
## Approximately 75% of max_count met: minutes 0.03733333 
## Approximately 90% of max_count met: minutes 0.04456667 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1485 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 77 104 
## # of subgroups with sample size less than criteria 175 
## # of subgroups meeting all criteria = 1279 
## # of subgroups fitted (Cox model estimable) = 1279 
## *Subgroup Searching Minutes=* 0.04916667 
## Number of subgroups meeting HR threshold 29 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  29 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##      n  E d1   HR L(HR) q23.0 q23.1 q24.0 q24.1 q22.0 q22.1 q1.0 q1.1 q18.0
## 1   62 37 22 1.82  0.94     0     0     0     0     0     0    0    1     0
## 2   67 39 22 1.81  0.96     0     0     0     1     0     0    0    1     0
## 3   95 78 44 1.74  1.11     0     0     0     1     0     1    0    0     0
## 4   79 47 26 1.54  0.87     0     0     0     1     0     0    0    0     0
## 5   82 31 19 1.50  0.73     0     0     0     0     0     0    0    0     0
## 6   67 28 16 1.50  0.70     0     0     0     0     0     0    0    1     0
## 7   74 39 18 1.49  0.79     0     0     0     1     0     0    0    0     0
## 8   79 45 26 1.49  0.82     0     1     0     0     0     0    0    1     0
## 9   99 54 29 1.48  0.87     0     0     0     0     0     0    0    1     0
## 10 122 95 52 1.48  0.98     0     1     0     0     0     1    0    0     0
##    q18.1
## 1      0
## 2      0
## 3      0
## 4      0
## 5      0
## 6      0
## 7      0
## 8      0
## 9      1
## 10     0
## Consistency 0.925 
## # of splits= 400 
## Model, % Consistency Met= {noise2 <= -0.95} !{z5} 0.925 
## Consistency 0.9325 
## # of splits= 400 
## Model, % Consistency Met= {z3} {noise2 <= -0.95} 0.9325 
## Consistency 0.9675 
## # of splits= 400 
## Model, % Consistency Met= {z3} {z1} 0.9675 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.0713 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.1311667 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 48.86072 2 
##   leaf.node control.mean control.size control.se depth
## 1         2        -4.41       509.00       1.23     1
## 2         3         2.52       191.00       2.29     1
## 3         4         2.33        95.00       2.91     2
## 4         5        -5.96       414.00       1.35     2
## 5         6         6.05       146.00       2.62     2
##   leaf.node control.mean control.size control.se depth
## 5         6         6.05       146.00       2.62     2
## GRF subgroup found 
## All splits 
## [1] "z1 <= 0"         "noise2 <= -0.95" "noise2 <= 0.71" 
## Terminating node at max.diff (sg.harm.id) 
## [1] "noise2 <= 0.705836025223127"
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## CV lambda = 0.0313058 
## 12 x 1 sparse Matrix of class "dgCMatrix"
##                 s0
## z1      0.28876957
## z2      .         
## z3      0.01851673
## z4      0.41993396
## z5     -0.71701803
## size    .         
## grade3  .         
## noise1 -0.02649584
## noise2  .         
## noise3  .         
## noise4  .         
## noise5  .         
## Cox-LASSO selected: z1 z3 z4 z5 noise1 
## Cox-LASSO not selected: z2 size grade3 noise2 noise3 noise4 noise5 
## Default cuts included from Lasso: 
## Categorical after Lasso: z1 z3 z4 z5 
## Factors per GRF: z1 <= 0 noise2 <= -0.95 noise2 <= 0.71 
## Initial GRF cuts included z1 <= 0 noise2 <= -0.95 noise2 <= 0.71 
## Factors included per GRF (not in lasso) noise2 <= -0.95 noise2 <= 0.71 
## # of candidate subgroup factors= 25 
##  [1] "noise2 <= -0.95" "noise2 <= 0.71"  "size <= 29.4"    "size <= 25"     
##  [5] "size <= 20"      "size <= 35"      "noise1 <= 0"     "noise1 <= -0.6" 
##  [9] "noise1 <= 0.7"   "noise2 <= 0"     "noise2 <= -0.8"  "noise2 <= 0.7"  
## [13] "noise3 <= 0"     "noise3 <= -0.7"  "noise3 <= 0.6"   "noise4 <= 0"    
## [17] "noise4 <= -0.7"  "noise4 <= 0.7"   "noise5 <= 0"     "noise5 <= -0.6" 
## [21] "noise5 <= 0.7"   "z1"              "z3"              "z4"             
## [25] "z5"             
## Number of factors evaluated= 25 
## Confounders per grf screening q23 q22 q1 q18 q6 q25 q24 q19 q8 q13 q21 q16 q7 q10 q5 q9 q11 q3 q15 q4 q2 q14 q17 q12 q20 
##            Factors Labels VI(grf)
## 23              z3    q23  0.2546
## 22              z1    q22  0.1397
## 1  noise2 <= -0.95     q1  0.0837
## 18   noise4 <= 0.7    q18  0.0628
## 6       size <= 35     q6  0.0303
## 25              z5    q25  0.0299
## 24              z4    q24  0.0294
## 19     noise5 <= 0    q19  0.0270
## 8   noise1 <= -0.6     q8  0.0267
## 13     noise3 <= 0    q13  0.0254
## 21   noise5 <= 0.7    q21  0.0250
## 16     noise4 <= 0    q16  0.0238
## 7      noise1 <= 0     q7  0.0233
## 10     noise2 <= 0    q10  0.0221
## 5       size <= 20     q5  0.0211
## 9    noise1 <= 0.7     q9  0.0204
## 11  noise2 <= -0.8    q11  0.0198
## 3     size <= 29.4     q3  0.0191
## 15   noise3 <= 0.6    q15  0.0177
## 4       size <= 25     q4  0.0171
## 2   noise2 <= 0.71     q2  0.0170
## 14  noise3 <= -0.7    q14  0.0168
## 17  noise4 <= -0.7    q17  0.0167
## 12   noise2 <= 0.7    q12  0.0159
## 20  noise5 <= -0.6    q20  0.0146
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1275 
## Approximately 5% of max_count met: minutes 0.002683333 
## Approximately 10% of max_count met: minutes 0.005483333 
## Approximately 20% of max_count met: minutes 0.0102 
## Approximately 33% of max_count met: minutes 0.01546667 
## Approximately 50% of max_count met: minutes 0.02366667 
## Approximately 75% of max_count met: minutes 0.03571667 
## Approximately 90% of max_count met: minutes 0.0422 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1275 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 70 94 
## # of subgroups with sample size less than criteria 155 
## # of subgroups meeting all criteria = 1090 
## # of subgroups fitted (Cox model estimable) = 1090 
## *Subgroup Searching Minutes=* 0.04595 
## Number of subgroups meeting HR threshold 26 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  26 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##      n  E d1   HR L(HR) q23.0 q23.1 q22.0 q22.1 q1.0 q1.1 q18.0 q18.1 q6.0 q6.1
## 1   62 37 22 1.82  0.94     0     0     0     0    0    1     0     0    0    0
## 2   67 39 22 1.81  0.96     0     1     0     0    0    1     0     0    0    0
## 3   95 78 44 1.74  1.11     0     1     0     1    0    0     0     0    0    0
## 4   79 47 26 1.54  0.87     0     1     0     0    0    0     0     0    0    0
## 5   82 31 19 1.50  0.73     0     0     0     0    0    0     0     0    0    0
## 6   67 28 16 1.50  0.70     0     0     0     0    0    1     0     0    0    0
## 7   74 39 18 1.49  0.79     0     1     0     0    0    0     0     0    0    0
## 8   99 54 29 1.48  0.87     0     0     0     0    0    1     0     1    0    0
## 9  100 80 41 1.47  0.94     0     0     0     1    0    0     0     0    0    0
## 10  72 39 25 1.43  0.74     0     1     0     0    0    0     1     0    0    0
## Consistency 0.925 
## # of splits= 400 
## Model, % Consistency Met= {noise2 <= -0.95} !{z5} 0.925 
## Consistency 0.9325 
## # of splits= 400 
## Model, % Consistency Met= {z3} {noise2 <= -0.95} 0.9325 
## Consistency 0.9675 
## # of splits= 400 
## Model, % Consistency Met= {z3} {z1} 0.9675 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.07788333 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.13395 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 49.01446 2 
##   leaf.node control.mean control.size control.se depth
## 1         2        -3.07       459.00       1.27     1
## 2         3         3.40       241.00       1.71     1
## 3         4        -6.70       129.00       2.28     2
## 4         5         4.26       203.00       1.96     2
## 5         6        -5.28       243.00       1.60     2
## 6         7         5.55       125.00       2.57     2
##   leaf.node control.mean control.size control.se depth
## 6         7         5.55       125.00       2.57     2
## GRF subgroup NOT found 
## NO GRF cuts meeting delta(RMST): dmin.grf= 12 
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## Default cuts included (1st 20) 
## Categorical: z1 z2 z3 z4 z5 grade3 
## # of candidate subgroup factors= 26 
##  [1] "size <= 29.9"   "size <= 25"     "size <= 21"     "size <= 35"    
##  [5] "noise1 <= 0"    "noise1 <= -0.7" "noise1 <= 0.7"  "noise2 <= 0"   
##  [9] "noise2 <= -0.7" "noise2 <= 0.7"  "noise3 <= -0.1" "noise3 <= -0.7"
## [13] "noise3 <= 0.6"  "noise4 <= -0.1" "noise4 <= 0"    "noise4 <= -0.8"
## [17] "noise4 <= 0.6"  "noise5 <= 0"    "noise5 <= -0.7" "noise5 <= 0.8" 
## [21] "z1"             "z2"             "z3"             "z4"            
## [25] "z5"             "grade3"        
## Number of factors evaluated= 26 
## Confounders per grf screening q3 q21 q8 q23 q20 q22 q24 q10 q25 q18 q11 q9 q5 q13 q4 q12 q19 q1 q17 q15 q26 q7 q16 q2 q6 q14 
##           Factors Labels VI(grf)
## 3      size <= 21     q3  0.1197
## 21             z1    q21  0.1170
## 8     noise2 <= 0     q8  0.0900
## 23             z3    q23  0.0858
## 20  noise5 <= 0.8    q20  0.0443
## 22             z2    q22  0.0436
## 24             z4    q24  0.0388
## 10  noise2 <= 0.7    q10  0.0369
## 25             z5    q25  0.0329
## 18    noise5 <= 0    q18  0.0313
## 11 noise3 <= -0.1    q11  0.0296
## 9  noise2 <= -0.7     q9  0.0285
## 5     noise1 <= 0     q5  0.0284
## 13  noise3 <= 0.6    q13  0.0271
## 4      size <= 35     q4  0.0244
## 12 noise3 <= -0.7    q12  0.0240
## 19 noise5 <= -0.7    q19  0.0234
## 1    size <= 29.9     q1  0.0228
## 17  noise4 <= 0.6    q17  0.0213
## 15    noise4 <= 0    q15  0.0209
## 26         grade3    q26  0.0206
## 7   noise1 <= 0.7     q7  0.0200
## 16 noise4 <= -0.8    q16  0.0199
## 2      size <= 25     q2  0.0177
## 6  noise1 <= -0.7     q6  0.0159
## 14 noise4 <= -0.1    q14  0.0154
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1378 
## Approximately 5% of max_count met: minutes 0.003233333 
## Approximately 10% of max_count met: minutes 0.006166667 
## Approximately 20% of max_count met: minutes 0.01535 
## Approximately 33% of max_count met: minutes 0.02416667 
## Approximately 50% of max_count met: minutes 0.03583333 
## Approximately 75% of max_count met: minutes 0.05271667 
## Approximately 90% of max_count met: minutes 0.06145 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1378 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 71 70 
## # of subgroups with sample size less than criteria 140 
## # of subgroups meeting all criteria = 1213 
## # of subgroups fitted (Cox model estimable) = 1213 
## *Subgroup Searching Minutes=* 0.06713333 
## Number of subgroups meeting HR threshold 68 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  68 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##      n  E d1   HR L(HR) q3.0 q3.1 q21.0 q21.1 q8.0 q8.1 q23.0 q23.1 q20.0 q20.1
## 1   88 63 35 3.59  2.13    0    0     0     1    0    0     0     1     0     0
## 2  117 78 42 2.03  1.29    0    0     0     1    0    0     0     0     0     0
## 3   88 56 29 1.87  1.11    0    0     0     1    0    0     0     0     0     0
## 4   91 54 25 1.82  1.07    0    0     0     1    1    0     0     0     0     0
## 5   71 46 26 1.77  0.98    0    0     0     0    0    0     0     1     0     0
## 6  131 82 40 1.67  1.08    0    0     0     1    0    0     0     0     0     0
## 7   70 49 25 1.66  0.94    0    0     0     0    0    0     0     0     1     0
## 8   67 31 17 1.62  0.80    0    0     0     0    0    0     0     1     0     0
## 9   89 59 28 1.61  0.96    0    0     0     1    0    0     0     0     0     0
## 10  80 56 29 1.60  0.94    0    0     0     1    0    0     0     0     0     0
## Consistency 1 
## # of splits= 400 
## Model, % Consistency Met= {z1} {z3} 1 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.02801667 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.1105167 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 49.01446 2 
##   leaf.node control.mean control.size control.se depth
## 1         2        -3.07       459.00       1.27     1
## 2         3         3.40       241.00       1.71     1
## 3         4        -6.70       129.00       2.28     2
## 4         5         4.26       203.00       1.96     2
## 5         6        -5.28       243.00       1.60     2
## 6         7         5.55       125.00       2.57     2
##   leaf.node control.mean control.size control.se depth
## 6         7         5.55       125.00       2.57     2
## GRF subgroup NOT found 
## NO GRF cuts meeting delta(RMST): dmin.grf= 12 
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## CV lambda = 0.01795345 
## 12 x 1 sparse Matrix of class "dgCMatrix"
##                  s0
## z1      0.288629433
## z2     -0.101509769
## z3      .          
## z4      0.603912320
## z5     -0.848116791
## size    0.002801471
## grade3  .          
## noise1  .          
## noise2 -0.028733702
## noise3  .          
## noise4  .          
## noise5  .          
## Cox-LASSO selected: z1 z2 z4 z5 size noise2 
## Cox-LASSO not selected: z3 grade3 noise1 noise3 noise4 noise5 
## Default cuts included from Lasso: 
## Categorical after Lasso: z1 z2 z4 z5 
## # of candidate subgroup factors= 24 
##  [1] "size <= 29.9"   "size <= 25"     "size <= 21"     "size <= 35"    
##  [5] "noise1 <= 0"    "noise1 <= -0.7" "noise1 <= 0.7"  "noise2 <= 0"   
##  [9] "noise2 <= -0.7" "noise2 <= 0.7"  "noise3 <= -0.1" "noise3 <= -0.7"
## [13] "noise3 <= 0.6"  "noise4 <= -0.1" "noise4 <= 0"    "noise4 <= -0.8"
## [17] "noise4 <= 0.6"  "noise5 <= 0"    "noise5 <= -0.7" "noise5 <= 0.8" 
## [21] "z1"             "z2"             "z4"             "z5"            
## Number of factors evaluated= 24 
## Confounders per grf screening q3 q21 q8 q22 q20 q10 q24 q23 q18 q9 q5 q13 q11 q4 q12 q19 q16 q17 q1 q15 q6 q7 q2 q14 
##           Factors Labels VI(grf)
## 3      size <= 21     q3  0.1279
## 21             z1    q21  0.1184
## 8     noise2 <= 0     q8  0.0971
## 22             z2    q22  0.0746
## 20  noise5 <= 0.8    q20  0.0467
## 10  noise2 <= 0.7    q10  0.0426
## 24             z5    q24  0.0402
## 23             z4    q23  0.0392
## 18    noise5 <= 0    q18  0.0335
## 9  noise2 <= -0.7     q9  0.0323
## 5     noise1 <= 0     q5  0.0308
## 13  noise3 <= 0.6    q13  0.0306
## 11 noise3 <= -0.1    q11  0.0301
## 4      size <= 35     q4  0.0298
## 12 noise3 <= -0.7    q12  0.0272
## 19 noise5 <= -0.7    q19  0.0261
## 16 noise4 <= -0.8    q16  0.0256
## 17  noise4 <= 0.6    q17  0.0244
## 1    size <= 29.9     q1  0.0242
## 15    noise4 <= 0    q15  0.0230
## 6  noise1 <= -0.7     q6  0.0209
## 7   noise1 <= 0.7     q7  0.0195
## 2      size <= 25     q2  0.0180
## 14 noise4 <= -0.1    q14  0.0174
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1176 
## Approximately 5% of max_count met: minutes 0.003833333 
## Approximately 10% of max_count met: minutes 0.007983333 
## Approximately 20% of max_count met: minutes 0.0143 
## Approximately 33% of max_count met: minutes 0.02215 
## Approximately 50% of max_count met: minutes 0.03003333 
## Approximately 75% of max_count met: minutes 0.04355 
## Approximately 90% of max_count met: minutes 0.05055 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1176 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 66 66 
## # of subgroups with sample size less than criteria 124 
## # of subgroups meeting all criteria = 1028 
## # of subgroups fitted (Cox model estimable) = 1028 
## *Subgroup Searching Minutes=* 0.05495 
## Number of subgroups meeting HR threshold 50 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  50 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##      n  E d1   HR L(HR) q3.0 q3.1 q21.0 q21.1 q8.0 q8.1 q22.0 q22.1 q20.0 q20.1
## 1  117 78 42 2.03  1.29    0    0     0     1    0    0     0     1     0     0
## 2   88 56 29 1.87  1.11    0    0     0     1    0    0     0     0     0     0
## 3   91 54 25 1.82  1.07    0    0     0     1    1    0     0     0     0     0
## 4  131 82 40 1.67  1.08    0    0     0     1    0    0     0     0     0     0
## 5   70 49 25 1.66  0.94    0    0     0     0    0    0     0     0     1     0
## 6   89 59 28 1.61  0.96    0    0     0     1    0    0     0     0     0     0
## 7   80 56 29 1.60  0.94    0    0     0     1    0    0     0     0     0     0
## 8   89 43 27 1.60  0.86    0    0     0     0    0    0     0     0     0     0
## 9   85 48 25 1.58  0.90    0    0     0     1    0    0     0     0     0     0
## 10 136 94 46 1.58  1.05    0    0     0     1    0    0     0     0     0     0
## Consistency 1 
## # of splits= 400 
## Model, % Consistency Met= {z1} {z2} 1 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.0306 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.0986 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 50.23146 2 
##   leaf.node control.mean control.size control.se depth
## 1         2         3.76       108.00       2.71     1
## 2         3        -5.08       592.00       1.26     1
## 3         4         3.45       107.00       2.74     2
## 4         5        -6.86       294.00       1.78     2
## 5         6        -7.74       211.00       1.92     2
## 6         7         7.73        88.00       3.69     2
##   leaf.node control.mean control.size control.se depth
## 6         7         7.73        88.00       3.69     2
## GRF subgroup found 
## All splits 
## [1] "z3 <= 0"    "size <= 20" "z1 <= 0"   
## Terminating node at max.diff (sg.harm.id) 
## [1] "z1 <= 0"
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## Default cuts included (1st 20) 
## Categorical: z1 z2 z3 z4 z5 grade3 
## Factors per GRF: z3 <= 0 size <= 20 z1 <= 0 
## Initial GRF cuts included z3 <= 0 size <= 20 z1 <= 0 
## # of candidate subgroup factors= 27 
##  [1] "size <= 20"     "size <= 28.8"   "size <= 25"     "size <= 35"    
##  [5] "noise1 <= -0.1" "noise1 <= 0"    "noise1 <= -0.7" "noise1 <= 0.6" 
##  [9] "noise2 <= 0"    "noise2 <= -0.7" "noise2 <= 0.7"  "noise3 <= 0"   
## [13] "noise3 <= -0.7" "noise3 <= 0.7"  "noise4 <= 0"    "noise4 <= -0.1"
## [17] "noise4 <= -0.7" "noise4 <= 0.6"  "noise5 <= 0"    "noise5 <= -0.6"
## [21] "noise5 <= 0.7"  "z1"             "z2"             "z3"            
## [25] "z4"             "z5"             "grade3"        
## Number of factors evaluated= 27 
## Confounders per grf screening q22 q23 q4 q1 q9 q25 q27 q17 q26 q19 q24 q11 q18 q12 q20 q14 q10 q7 q5 q16 q21 q3 q2 q6 q8 q15 q13 
##           Factors Labels VI(grf)
## 22             z1    q22  0.1097
## 23             z2    q23  0.0813
## 4      size <= 35     q4  0.0691
## 1      size <= 20     q1  0.0649
## 9     noise2 <= 0     q9  0.0608
## 25             z4    q25  0.0558
## 27         grade3    q27  0.0469
## 17 noise4 <= -0.7    q17  0.0449
## 26             z5    q26  0.0437
## 19    noise5 <= 0    q19  0.0354
## 24             z3    q24  0.0348
## 11  noise2 <= 0.7    q11  0.0288
## 18  noise4 <= 0.6    q18  0.0277
## 12    noise3 <= 0    q12  0.0272
## 20 noise5 <= -0.6    q20  0.0272
## 14  noise3 <= 0.7    q14  0.0244
## 10 noise2 <= -0.7    q10  0.0240
## 7  noise1 <= -0.7     q7  0.0235
## 5  noise1 <= -0.1     q5  0.0225
## 16 noise4 <= -0.1    q16  0.0215
## 21  noise5 <= 0.7    q21  0.0206
## 3      size <= 25     q3  0.0205
## 2    size <= 28.8     q2  0.0176
## 6     noise1 <= 0     q6  0.0174
## 8   noise1 <= 0.6     q8  0.0173
## 15    noise4 <= 0    q15  0.0168
## 13 noise3 <= -0.7    q13  0.0158
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1485 
## Approximately 5% of max_count met: minutes 0.003366667 
## Approximately 10% of max_count met: minutes 0.006683333 
## Approximately 20% of max_count met: minutes 0.0131 
## Approximately 33% of max_count met: minutes 0.02088333 
## Approximately 50% of max_count met: minutes 0.03113333 
## Approximately 75% of max_count met: minutes 0.0471 
## Approximately 90% of max_count met: minutes 0.05565 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1485 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 68 76 
## # of subgroups with sample size less than criteria 146 
## # of subgroups meeting all criteria = 1311 
## # of subgroups fitted (Cox model estimable) = 1311 
## *Subgroup Searching Minutes=* 0.06075 
## Number of subgroups meeting HR threshold 9 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  9 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##    n  E d1   HR L(HR) q22.0 q22.1 q23.0 q23.1 q4.0 q4.1 q1.0 q1.1 q9.0
## 1 88 68 36 1.85  1.14     0     1     0     0    0    0    0    0    0
## 2 84 41 25 1.78  0.95     0     0     1     0    0    0    0    1    0
## 3 96 63 37 1.50  0.90     0     1     0     0    0    0    0    0    0
## 4 94 47 27 1.36  0.76     0     0     0     0    0    0    0    1    0
## 5 87 65 33 1.32  0.81     0     1     0     0    0    0    0    0    0
## 6 97 69 33 1.30  0.80     0     1     0     0    0    0    0    0    0
## 7 90 65 31 1.29  0.79     0     1     0     0    0    0    0    0    0
## 8 76 48 25 1.29  0.73     0     1     0     0    0    0    0    0    0
## 9 85 55 30 1.26  0.74     0     0     0     0    0    0    0    0    0
## Consistency 0.975 
## # of splits= 400 
## Model, % Consistency Met= {z1} {z3} 0.975 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.02623333 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.09886667 
## FS: GRF stage for cut selection with dmin,tau= 12 0.6 
## tau, maxdepth= 50.23146 2 
##   leaf.node control.mean control.size control.se depth
## 1         2         3.76       108.00       2.71     1
## 2         3        -5.08       592.00       1.26     1
## 3         4         3.45       107.00       2.74     2
## 4         5        -6.86       294.00       1.78     2
## 5         6        -7.74       211.00       1.92     2
## 6         7         7.73        88.00       3.69     2
##   leaf.node control.mean control.size control.se depth
## 6         7         7.73        88.00       3.69     2
## GRF subgroup found 
## All splits 
## [1] "z3 <= 0"    "size <= 20" "z1 <= 0"   
## Terminating node at max.diff (sg.harm.id) 
## [1] "z1 <= 0"
## # of continuous/categorical characteristics 6 6 
## Continuous characteristics: size noise1 noise2 noise3 noise4 noise5 
## Categorical characteristics: z1 z2 z3 z4 z5 grade3 
## CV lambda = 0.01166399 
## 12 x 1 sparse Matrix of class "dgCMatrix"
##                 s0
## z1      0.43032177
## z2     -0.35901533
## z3      0.40313734
## z4      0.61783137
## z5     -0.74776389
## size    .         
## grade3  .         
## noise1  .         
## noise2  .         
## noise3  .         
## noise4  0.09056499
## noise5 -0.09270525
## Cox-LASSO selected: z1 z2 z3 z4 z5 noise4 noise5 
## Cox-LASSO not selected: size grade3 noise1 noise2 noise3 
## Default cuts included from Lasso: 
## Categorical after Lasso: z1 z2 z3 z4 z5 
## Factors per GRF: z3 <= 0 size <= 20 z1 <= 0 
## Initial GRF cuts included z3 <= 0 size <= 20 z1 <= 0 
## Factors included per GRF (not in lasso) size <= 20 
## # of candidate subgroup factors= 26 
##  [1] "size <= 20"     "size <= 28.8"   "size <= 25"     "size <= 35"    
##  [5] "noise1 <= -0.1" "noise1 <= 0"    "noise1 <= -0.7" "noise1 <= 0.6" 
##  [9] "noise2 <= 0"    "noise2 <= -0.7" "noise2 <= 0.7"  "noise3 <= 0"   
## [13] "noise3 <= -0.7" "noise3 <= 0.7"  "noise4 <= 0"    "noise4 <= -0.1"
## [17] "noise4 <= -0.7" "noise4 <= 0.6"  "noise5 <= 0"    "noise5 <= -0.6"
## [21] "noise5 <= 0.7"  "z1"             "z2"             "z3"            
## [25] "z4"             "z5"            
## Number of factors evaluated= 26 
## Confounders per grf screening q22 q23 q4 q9 q1 q25 q17 q26 q19 q24 q11 q18 q10 q12 q21 q20 q3 q14 q5 q7 q6 q13 q2 q16 q8 q15 
##           Factors Labels VI(grf)
## 22             z1    q22  0.1173
## 23             z2    q23  0.0864
## 4      size <= 35     q4  0.0690
## 9     noise2 <= 0     q9  0.0646
## 1      size <= 20     q1  0.0624
## 25             z4    q25  0.0608
## 17 noise4 <= -0.7    q17  0.0478
## 26             z5    q26  0.0419
## 19    noise5 <= 0    q19  0.0395
## 24             z3    q24  0.0389
## 11  noise2 <= 0.7    q11  0.0346
## 18  noise4 <= 0.6    q18  0.0316
## 10 noise2 <= -0.7    q10  0.0284
## 12    noise3 <= 0    q12  0.0260
## 21  noise5 <= 0.7    q21  0.0258
## 20 noise5 <= -0.6    q20  0.0256
## 3      size <= 25     q3  0.0236
## 14  noise3 <= 0.7    q14  0.0234
## 5  noise1 <= -0.1     q5  0.0226
## 7  noise1 <= -0.7     q7  0.0218
## 6     noise1 <= 0     q6  0.0199
## 13 noise3 <= -0.7    q13  0.0191
## 2    size <= 28.8     q2  0.0187
## 16 noise4 <= -0.1    q16  0.0180
## 8   noise1 <= 0.6     q8  0.0167
## 15    noise4 <= 0    q15  0.0156
## Number of possible configurations (<= maxk): maxk, # <= maxk 2 1378 
## Approximately 5% of max_count met: minutes 0.003166667 
## Approximately 10% of max_count met: minutes 0.006666667 
## Approximately 20% of max_count met: minutes 0.01241667 
## Approximately 33% of max_count met: minutes 0.02095 
## Approximately 50% of max_count met: minutes 0.02898333 
## Approximately 75% of max_count met: minutes 0.044 
## Approximately 90% of max_count met: minutes 0.05183333 
## # of subgroups evaluated based on (up to) maxk-factor combinations 1378 
## % of all-possible combinations (<= maxk) 100 
## k.max= 2 
## Events criteria for control,exp= 10 10 
## # of subgroups with events less than criteria: control, experimental 65 73 
## # of subgroups with sample size less than criteria 132 
## # of subgroups meeting all criteria = 1218 
## # of subgroups fitted (Cox model estimable) = 1218 
## *Subgroup Searching Minutes=* 0.0569 
## Number of subgroups meeting HR threshold 8 
## Subgroup candidate(s) found (FS) 
## # of candidate subgroups (meeting HR criteria) =  8 
## SGs (1st 10) meeting screening thresholds sorted by sg_focus= hr 
##    n  E d1   HR L(HR) q22.0 q22.1 q23.0 q23.1 q4.0 q4.1 q9.0 q9.1
## 1 88 68 36 1.85  1.14     0     1     0     0    0    0    0    0
## 2 84 41 25 1.78  0.95     0     0     1     0    0    0    0    0
## 3 96 63 37 1.50  0.90     0     1     0     0    0    0    0    0
## 4 94 47 27 1.36  0.76     0     0     0     0    0    0    0    1
## 5 87 65 33 1.32  0.81     0     1     0     0    0    0    0    0
## 6 97 69 33 1.30  0.80     0     1     0     0    0    0    0    0
## 7 90 65 31 1.29  0.79     0     1     0     0    0    0    0    0
## 8 76 48 25 1.29  0.73     0     1     0     0    0    0    0    0
## Consistency 0.975 
## # of splits= 400 
## Model, % Consistency Met= {z1} {z3} 0.975 
## SG focus= hr 
## Subgroup Consistency Minutes= 0.0269 
## Subgroup found (FS) 
## Minutes forestsearch overall= 0.0953
\end{verbatim}
\begin{alltt}
\hlstd{t.now} \hlkwb{<-} \hlkwd{proc.time}\hlstd{()[}\hlnum{3}\hlstd{]}
\hlstd{t.min} \hlkwb{<-} \hlstd{(t.now} \hlopt{-} \hlstd{t.start)}\hlopt{/}\hlnum{60}


\hlkwd{print}\hlstd{(}\hlkwd{table}\hlstd{(res}\hlopt{$}\hlstd{analysis))}
\end{alltt}
\begin{verbatim}
## 
##     FSl    FSlg     GRF  GRF.60  VT(24)  VT(36) VT#(24) VT#(36) 
##    1000    1000    1000    1000    1000    1000    1000    1000
\end{verbatim}
\begin{alltt}
\hlstd{check} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlkwd{c}\hlstd{(}\hlkwd{table}\hlstd{(res}\hlopt{$}\hlstd{analysis))} \hlopt{-} \hlstd{Nsims)}
\hlkwa{if} \hlstd{(}\hlkwd{all}\hlstd{(check} \hlopt{!=} \hlnum{0}\hlstd{))} \hlkwd{stop}\hlstd{(}\hlstr{"All analyses not complete"}\hlstd{)}

\hlstd{dgm_alt} \hlkwb{<-} \hlstd{dgm}

\hlstd{outres} \hlkwb{<-} \hlkwd{out.results}\hlstd{(}\hlkwc{res} \hlstd{= res,} \hlkwc{dgm} \hlstd{= dgm,} \hlkwc{output.file} \hlstd{= output.file,} \hlkwc{t.min} \hlstd{= t.min,}
    \hlkwc{out_analysis} \hlstd{=} \hlstr{"FSl"}\hlstd{)}
\end{alltt}
\begin{verbatim}
## [1] "results/oc_sims=1000_m4a-Noise=5_N=700_alt_ktreat=0.9_hrH=2_v0B-4cuts.Rdata"
##      sim sizeH_true propH_true sizeHc_true propHc_true any.H size.H size.Hc
##    <int>      <num>      <num>       <int>       <num> <num>  <num>   <int>
## 1:     1         95  0.1357143         605   0.8642857     1     95     605
## 2:     1         95  0.1357143         605   0.8642857     1     95     605
## 3:     1         95  0.1357143         605   0.8642857     1    181     519
## 4:     1         95  0.1357143         605   0.8642857     1    146     554
## 5:     1         95  0.1357143         605   0.8642857     0      0     700
## 6:     1         95  0.1357143         605   0.8642857     0      0     700
##          ppv       npv specificity sensitivity found.1 found.2 found.both
##        <num>     <num>       <num>       <num>   <num>   <num>      <num>
## 1: 1.0000000 1.0000000   1.0000000   1.0000000       0       0          0
## 2: 1.0000000 1.0000000   1.0000000   1.0000000       0       0          0
## 3: 0.6631579 0.8049587   0.9383430   0.3480663      NA      NA         NA
## 4: 0.7894737 0.8826446   0.9638989   0.5136986      NA      NA         NA
## 5: 0.0000000 1.0000000   0.8642857   0.0000000       0       0          0
## 6: 0.0000000 1.0000000   0.8642857   0.0000000       0       0          0
##    found.al3 hr.H.true hr.Hc.true hr.H.hat hr.Hc.hat       b1.H       b2.H
##        <num>     <num>      <num>    <num>     <num>      <num>      <num>
## 1:         0   1.74466  0.5577464 1.744660 0.5577464  0.0000000 -0.2553474
## 2:         0   1.74466  0.5577464 1.744660 0.5577464  0.0000000 -0.2553474
## 3:        NA   1.74466  0.5577464 1.459944 0.4959567 -0.2847159 -0.5400632
## 4:        NA   1.74466  0.5577464 1.269292 0.5300535 -0.4753683 -0.7307157
## 5:         0   1.74466  0.5577464       NA 0.6688550         NA         NA
## 6:         0   1.74466  0.5577464       NA 0.6688550         NA         NA
##          b1.Hc       b2.Hc    p.cens analysis   taumax   hr.itt     l.itt
##          <num>       <num>     <num>   <char>    <num>    <num>     <num>
## 1:  0.00000000 -0.08889407 0.4514286      FSl 81.43453 0.668855 0.5464683
## 2:  0.00000000 -0.08889407 0.4514286     FSlg 48.86072 0.668855 0.5464683
## 3: -0.06178971 -0.15068378 0.4514286      GRF 81.43453 0.668855 0.5464683
## 4: -0.02769288 -0.11658695 0.4514286   GRF.60 48.86072 0.668855 0.5464683
## 5:  0.11110856  0.02221450 0.4514286   VT(24) 81.43453 0.668855 0.5464683
## 6:  0.11110856  0.02221450 0.4514286  VT#(24) 81.43453 0.668855 0.5464683
##        u.itt hr.adj.itt l.adj.itt u.adj.itt l.H.true u.H.true l.Hc.true
##        <num>      <num>     <num>     <num>    <num>    <num>     <num>
## 1: 0.8186513  0.6827343 0.5565269 0.8375626 1.105971 2.752186 0.4437854
## 2: 0.8186513  0.6827343 0.5565269 0.8375626 1.105971 2.752186 0.4437854
## 3: 0.8186513  0.6827343 0.5565269 0.8375626 1.105971 2.752186 0.4437854
## 4: 0.8186513  0.6827343 0.5565269 0.8375626 1.105971 2.752186 0.4437854
## 5: 0.8186513  0.6827343 0.5565269 0.8375626 1.105971 2.752186 0.4437854
## 6: 0.8186513  0.6827343 0.5565269 0.8375626 1.105971 2.752186 0.4437854
##    u.Hc.true   l.H.hat  u.H.hat  l.Hc.hat  u.Hc.hat
##        <num>     <num>    <num>     <num>     <num>
## 1: 0.7009717 1.1059709 2.752186 0.4437854 0.7009717
## 2: 0.7009717 1.1059709 2.752186 0.4437854 0.7009717
## 3: 0.7009717 0.9876672 2.158051 0.3894210 0.6316379
## 4: 0.7009717 0.8574809 1.878877 0.4167659 0.6741357
## 5: 0.7009717        NA       NA 0.5464683 0.8186513
## 6: 0.7009717        NA       NA 0.5464683 0.8186513
## Subgroup HRs: H, H^c, Causal= 2.000007 0.6466405 0.7057463 
## Simulations= 1000 
## Avg censoring= 0.44999 
## Min,Max,Avg tau.max= 74.465 83.95939 81.60594 
## P(H) approximation at causal(H), n(sg)=60, approx= 2.000007 60 0.8283003 
## P(H) approximation at causal(H), Avg(n(sg)), approx= 2.000007 89 0.8998777 
## P(H) approximation at plim(H), Avg(n(sg)), approx= 2.127636 89 0.9289428 
## Minutes,hours 11.9284 0.1988067 
##                    FSl    FSlg     GRF  GRF.60  VT(24) VT#(24)  VT(36) VT#(36)
## any.H            0.950   0.900   0.960   0.730   0.390   0.460   0.360   0.480
## sensH            0.780   0.660   0.600   0.480   0.300   0.390   0.270   0.430
## sensHc           0.980   0.960   0.920   0.950   0.990   0.990   0.990   0.990
## ppH              0.780   0.650   0.530   0.430   0.290   0.380   0.270   0.420
## ppHc             0.970   0.950   0.940   0.930   0.910   0.920   0.910   0.930
## Avg(#H)         88.000  90.000 107.000 103.000  92.000  93.000  91.000  92.000
## minH            61.000  61.000  60.000  60.000  60.000  60.000  60.000  60.000
## maxH           220.000 220.000 327.000 228.000 171.000 178.000 185.000 171.000
## Avg(#Hc)       617.000 619.000 598.000 625.000 664.000 657.000 668.000 656.000
## minHc          480.000 480.000 373.000 472.000 529.000 522.000 515.000 529.000
## maxHc          700.000 700.000 700.000 700.000 700.000 700.000 700.000 700.000
## hat(H*)          2.164   2.183   2.148   2.206   2.398   2.371   2.421   2.399
## hat(hat[H])      2.252   2.181   1.985   1.904   2.142   2.190   2.161   2.270
## hat(Hc*)         0.653   0.654   0.652   0.647   0.656   0.651   0.649   0.651
## hat(hat[Hc])     0.653   0.654   0.641   0.647   0.668   0.656   0.662   0.654
## hat(H*)all       2.128   2.128   2.128   2.128   2.128   2.128   2.128   2.128
## hat(Hc*)all      0.651   0.651   0.651   0.651   0.651   0.651   0.651   0.651
## hat(ITT)all      0.754   0.754   0.754   0.754   0.754   0.754   0.754   0.754
## hat(ITTadj)all   0.742   0.742   0.742   0.742   0.742   0.742   0.742   0.742
\end{verbatim}
\begin{alltt}
\hlstd{missC} \hlkwb{<-} \hlkwd{tab_tests}\hlstd{(}\hlkwc{res} \hlstd{= res)}

\hlstd{pA} \hlkwb{<-} \hlkwd{as.character}\hlstd{(}\hlkwd{round}\hlstd{(outres}\hlopt{$}\hlstd{pAnyH.approx2,} \hlnum{4}\hlstd{))}

\hlstd{tabsim_missC} \hlkwb{<-} \hlkwd{get_tabsim}\hlstd{(}\hlkwc{missC} \hlstd{= missC,} \hlkwc{pA} \hlstd{= pA,} \hlkwc{est_names} \hlstd{= est_names,} \hlkwc{stat_names} \hlstd{= stat_names,}
    \hlkwc{mod.harm} \hlstd{= mod.harm,} \hlkwc{Nsims} \hlstd{= Nsims)}
\end{alltt}
\end{kframe}
\end{knitrout}

\begin{table}[!h]
\centering
\caption{\label{tab:r hrh2}Average classification rates: ${avg}\vert \hat{H} \vert$, ${min}\vert \hat{H} \vert$, and ${max}\vert \hat{H} \vert$, denote the average, 
minimum, and maximum of the number of subjects in the estimated subgroup $\hat{H}$ (analogously for $\hat{H}^{c}$).  
Note that under the null $sens(\hat{H})$ is undefined and $ppv(\hat{H})=0$.}
\centering
\fontsize{9}{11}\selectfont
\begin{tabular}[t]{lcccccccc}
\toprule
  & $FS_{g}$ & $FS_{lg}$ & $GRF$ & $GRF_{60}$ & $VT(24)$ & ${VT}^{\#}(24)$ & $VT(36)$ & ${VT}^{\#}(36)$\\
\midrule
\addlinespace[0.3em]
\multicolumn{9}{l}{\textbf{Finding H}}\\
\hspace{1em}any(H) & 0.95 & 0.9 & 0.96 & 0.73 & 0.39 & 0.46 & 0.36 & 0.48\\
\hspace{1em}${sens}(\hat{H})$ & 0.78 & 0.66 & 0.6 & 0.48 & 0.3 & 0.39 & 0.27 & 0.43\\
\hspace{1em}${sens}(\hat{H}^{C})$ & 0.98 & 0.96 & 0.92 & 0.95 & 0.99 & 0.99 & 0.99 & 0.99\\
\hspace{1em}${ppv}(\hat{H})$ & 0.78 & 0.65 & 0.53 & 0.43 & 0.29 & 0.38 & 0.27 & 0.42\\
\hspace{1em}${ppv}(\hat{H}^{C})$ & 0.97 & 0.95 & 0.94 & 0.93 & 0.91 & 0.92 & 0.91 & 0.93\\
\addlinespace[0.3em]
\multicolumn{9}{l}{\textbf{Size of H and H-complement}}\\
\hspace{1em}${avg}\vert \hat{H} \vert$ & 88 & 90 & 107 & 103 & 92 & 93 & 91 & 92\\
\hspace{1em}${min}\vert \hat{H} \vert$ & 61 & 61 & 60 & 60 & 60 & 60 & 60 & 60\\
\hspace{1em}${max}\vert \hat{H} \vert$ & 220 & 220 & 327 & 228 & 171 & 178 & 185 & 171\\
\hspace{1em}${avg}\vert \hat{H}^{C} \vert$ & 617 & 619 & 598 & 625 & 664 & 657 & 668 & 656\\
\hspace{1em}${min}\vert \hat{H}^{C} \vert$ & 480 & 480 & 373 & 472 & 529 & 522 & 515 & 529\\
\hspace{1em}${max}\vert \hat{H}^{C} \vert$ & 700 & 700 & 700 & 700 & 700 & 700 & 700 & 700\\
\bottomrule
\multicolumn{9}{l}{\rule{0pt}{1em}\textit{Note: } Number of simulations= 1000 .}\\
\multicolumn{9}{l}{\rule{0pt}{1em}\textit{Note: } Probability approximation= 0.8999 .}\\
\end{tabular}
\end{table}




\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{t.done} \hlkwb{<-} \hlkwd{proc.time}\hlstd{()[}\hlnum{3}\hlstd{]}
\hlstd{t.min} \hlkwb{<-} \hlstd{(t.done} \hlopt{-} \hlstd{t.start.all)}\hlopt{/}\hlnum{60}
\hlkwd{cat}\hlstd{(}\hlstr{"Minutes and hours to finish"}\hlstd{,} \hlkwd{c}\hlstd{(t.min, t.min}\hlopt{/}\hlnum{60}\hlstd{),} \hlstr{"\textbackslash{}n"}\hlstd{)}
\end{alltt}
\begin{verbatim}
## Minutes and hours to finish 26.85643 0.4476072
\end{verbatim}
\begin{alltt}
\hlkwd{cat}\hlstd{(}\hlstr{"Minutes and hours per 10,000 to finish"}\hlstd{, (}\hlnum{10000}\hlopt{/}\hlstd{Nsims)} \hlopt{*} \hlkwd{c}\hlstd{(t.min, t.min}\hlopt{/}\hlnum{60}\hlstd{),}
    \hlstr{"\textbackslash{}n"}\hlstd{)}
\end{alltt}
\begin{verbatim}
## Minutes and hours per 10,000 to finish 268.5643 4.476072
\end{verbatim}
\begin{alltt}
\hlcom{# cat('Machine=',c(Sys.info()[[4]]),'\textbackslash{}n') cat('Number of}
\hlcom{# cores=',c(detectCores(logical = FALSE)),'\textbackslash{}n')}
\hlkwd{require}\hlstd{(benchmarkme)}
\hlstd{my_system} \hlkwb{<-} \hlkwd{get_cpu}\hlstd{()}
\hlstd{my_ram} \hlkwb{<-} \hlkwd{get_ram}\hlstd{()}
\hlkwd{cat}\hlstd{(}\hlstr{"Running on system:"}\hlstd{,} \hlkwd{c}\hlstd{(my_system}\hlopt{$}\hlstd{model_name),} \hlstr{"\textbackslash{}n"}\hlstd{)}
\end{alltt}
\begin{verbatim}
## Running on system: AMD Ryzen Threadripper PRO 5995WX 64-Cores
\end{verbatim}
\begin{alltt}
\hlkwd{cat}\hlstd{(}\hlstr{"with number of cores and cpu/GB="}\hlstd{,} \hlkwd{c}\hlstd{(my_system}\hlopt{$}\hlstd{no_of_cores,} \hlkwd{round}\hlstd{(}\hlkwd{c}\hlstd{(my_ram)}\hlopt{/}\hlnum{10}\hlopt{^}\hlnum{9}\hlstd{,}
    \hlnum{0}\hlstd{)),} \hlstr{"\textbackslash{}n"}\hlstd{)}
\end{alltt}
\begin{verbatim}
## with number of cores and cpu/GB= 128 270
\end{verbatim}
\end{kframe}
\end{knitrout}



\end{document}














