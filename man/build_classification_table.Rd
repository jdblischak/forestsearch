% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulation_tables.R
\name{build_classification_table}
\alias{build_classification_table}
\title{Build Classification Rate Table from Simulation Results}
\usage{
build_classification_table(
  scenario_results,
  analyses = NULL,
  digits = 2,
  title = "Subgroup Identification and Classification Rates",
  n_sims = NULL,
  bold_threshold = 0.05,
  font_size = 12
)
}
\arguments{
\item{scenario_results}{Named list. Each element is itself a list with:
\describe{
\item{results}{\code{data.table} from
\code{\link{run_simulation_analysis}}.}
\item{label}{Character scenario label, e.g., \code{"M1"}.}
\item{n_sample}{Integer sample size.}
\item{dgm}{DGM object (for true HRs and subgroup prevalence).}
\item{hypothesis}{Character: \code{"null"} or \code{"alt"}.}
}}

\item{analyses}{Character vector of analysis labels to include
(e.g., \code{c("FS", "FSlg", "GRF")}). When \code{NULL}, all unique
values of \code{results$analysis} across scenarios are used.}

\item{digits}{Integer. Decimal places for proportions. Default: 2.}

\item{title}{Character. Table title. Default:
\code{"Subgroup Identification and Classification Rates"}.}

\item{n_sims}{Integer. Number of simulations (for subtitle). Default:
\code{NULL}.}

\item{bold_threshold}{Numeric. Type I error threshold above which the
\code{any(H)} value is shown in bold. Set \code{NULL} to disable.
Default: 0.05.}

\item{font_size}{Numeric. Font size in pixels for table text. Default: 12.
Increase to 14 or 16 for larger display.}
}
\value{
A \code{gt} table object.
}
\description{
Constructs a publication-quality \code{gt} table summarizing subgroup
identification and classification rates across one or more data generation
scenarios and analysis methods. The layout mirrors Table 4 of
Leon et al. (2024) with metrics grouped by model scenario (null / alt)
and columns for each analysis method.
}
\details{
For each scenario the function computes:
\itemize{
\item \code{any(H)}: Proportion of simulations identifying any subgroup.
\item \code{sens(H)}: Mean sensitivity (only under alternative).
\item \code{sens(Hc)}: Mean specificity.
\item \code{ppv(H)}: Mean positive predictive value (only under
alternative).
\item \code{ppv(Hc)}: Mean negative predictive value.
\item \code{avg|H|}: Mean size of identified subgroup (when found).
}

Under the null hypothesis the rows are reduced to \code{any(H)},
\code{sens(Hc)}, \code{ppv(Hc)}, and \code{avg|H|}.
}
\examples{
\dontrun{
# Assemble results from H0 and H1 simulations
scenarios <- list(
  null = list(
    results = results_null, label = "M1",
    n_sample = 700, dgm = dgm_null, hypothesis = "null"
  ),
  alt = list(
    results = results_alt, label = "M1",
    n_sample = 700, dgm = dgm_calibrated, hypothesis = "alt"
  )
)

build_classification_table(scenarios, n_sims = 100)
}

}
\seealso{
\code{\link{format_oc_results}},
\code{\link{summarize_simulation_results}}
}
