% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/subgroup_consistency_main.r
\name{evaluate_consistency_twostage}
\alias{evaluate_consistency_twostage}
\title{Two-Stage Sequential Consistency Evaluation}
\usage{
evaluate_consistency_twostage(
  m,
  index.Z,
  names.Z,
  df,
  found.hrs,
  hr.consistency,
  pconsistency.threshold,
  pconsistency.digits = 2,
  maxk,
  confs_labels,
  details = FALSE,
  n.splits.screen = 30,
  screen.threshold = NULL,
  n.splits.max = 400,
  batch.size = 20,
  conf.level = 0.95,
  min.valid.screen = 10
)
}
\arguments{
\item{m}{Integer. Index of subgroup to evaluate.}

\item{index.Z}{data.table or matrix. Factor indicators for all subgroups.}

\item{names.Z}{Character vector. Names of factor columns.}

\item{df}{data.frame. Original data with Y, Event, Treat, id columns.}

\item{found.hrs}{data.table. Subgroup hazard ratio results.}

\item{hr.consistency}{Numeric. Minimum HR threshold for consistency.}

\item{pconsistency.threshold}{Numeric. Final consistency threshold.}

\item{pconsistency.digits}{Integer. Rounding digits for output.}

\item{maxk}{Integer. Maximum number of factors in a subgroup.}

\item{confs_labels}{Character vector. Labels for confounders.}

\item{details}{Logical. Print progress details.}

\item{n.splits.screen}{Integer. Number of splits for Stage 1.}

\item{screen.threshold}{Numeric. Screening threshold for Stage 1.}

\item{n.splits.max}{Integer. Maximum total splits.}

\item{batch.size}{Integer. Splits per batch in Stage 2.}

\item{conf.level}{Numeric. Confidence level for early stopping.}

\item{min.valid.screen}{Integer. Minimum valid splits in Stage 1.}
}
\value{
Named numeric vector with consistency results, or NULL if not met.
}
\description{
Evaluates a single subgroup for consistency using a two-stage approach
with sequential early stopping.
}
