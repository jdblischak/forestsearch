% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/subgroup_search.R
\name{subgroup.search}
\alias{subgroup.search}
\title{Subgroup Search for Treatment Effect Heterogeneity (Improved)}
\usage{
subgroup.search(
  Y,
  Event,
  Treat,
  ID = NULL,
  Z,
  n.min = 30,
  d0.min = 15,
  d1.min = 15,
  hr.threshold = 1,
  max.minutes = 30,
  minp = 0.05,
  rmin = 5,
  details = FALSE,
  maxk = 2
)
}
\arguments{
\item{Y}{Numeric vector of outcome (e.g., time-to-event).}

\item{Event}{Numeric vector of event indicators (0/1).}

\item{Treat}{Numeric vector of treatment group indicators (0/1).}

\item{ID}{Optional vector of subject IDs.}

\item{Z}{Matrix or data frame of candidate subgroup factors (binary indicators).}

\item{n.min}{Integer. Minimum subgroup size.}

\item{d0.min}{Integer. Minimum number of events in control.}

\item{d1.min}{Integer. Minimum number of events in treatment.}

\item{hr.threshold}{Numeric. Hazard ratio threshold for subgroup selection.}

\item{max.minutes}{Numeric. Maximum minutes for search.}

\item{minp}{Numeric. Minimum prevalence rate for each factor.}

\item{rmin}{Integer. Minimum required reduction in sample size when adding a factor.}

\item{details}{Logical. Print details during execution.}

\item{maxk}{Integer. Maximum number of factors in a subgroup.}
}
\value{
List with found subgroups, maximum HR, search time, configuration info,
and filtering statistics:
\describe{
\item{out.found}{List containing hr.subgroups data.table of candidates}
\item{max_sg_est}{Maximum HR estimate found}
\item{time_search}{Search time in minutes}
\item{L}{Number of single factors}
\item{max_count}{Total combinations evaluated}
\item{prop_max_count}{Proportion of max combinations (always 1)}
\item{filter_counts}{List with counts at each filtering stage:
\itemize{
\item n_evaluated: Total combinations evaluated
\item n_passed_variance: Passed variance check
\item n_passed_prevalence: Passed prevalence threshold
\item n_passed_redundancy: Passed redundancy check
\item n_passed_events: Passed event count criteria (d0.min, d1.min)
\item n_passed_sample_size: Passed sample size criteria (n.min)
\item n_passed_cox: Cox model fit successfully
\item n_passed_hr: Passed HR threshold (final candidates)
}
}
}
}
\description{
Searches for subgroups with treatment effect heterogeneity using combinations
of candidate factors. Evaluates subgroups for minimum prevalence, event counts,
and hazard ratio threshold.
}
