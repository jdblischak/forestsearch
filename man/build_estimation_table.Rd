% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulation_tables.R
\name{build_estimation_table}
\alias{build_estimation_table}
\title{Build Estimation Properties Table from Simulation Results}
\usage{
build_estimation_table(
  results,
  dgm,
  analysis_method = "FSlg",
  n_boots = NULL,
  digits = 2,
  title = "Estimation Properties",
  font_size = 12
)
}
\arguments{
\item{results}{\code{data.table} or \code{data.frame}. Simulation results
from \code{\link{run_simulation_analysis}}, optionally enriched with
bootstrap bias-corrected columns (\code{hr.H.bc}, \code{hr.Hc.bc}).}

\item{dgm}{DGM object. Used for true parameter values (\code{hr_H_true},
\code{hr_Hc_true}, and AHR truth via \code{\link{get_dgm_hr}}).}

\item{analysis_method}{Character. Which analysis method to tabulate
(e.g., \code{"FSlg"}). Default: \code{"FSlg"}.}

\item{n_boots}{Integer or \code{NULL}. Number of bootstraps. When non-NULL,
appended to the subtitle as "(B = n_boots bootstraps)". Default: \code{NULL}.}

\item{digits}{Integer. Decimal places. Default: 2.}

\item{title}{Character. Table title.}

\item{font_size}{Numeric. Font size in pixels for table text. Default: 12.
Increase to 14 or 16 for larger display.}
}
\value{
A \code{gt} table object, or \code{NULL} if no estimable
realizations exist.
}
\description{
Constructs a publication-quality \code{gt} table summarizing estimation
properties for hazard ratios in the identified subgroup and its complement.
The layout mirrors the estimation table in Leon et al. (2024), showing
average estimate, empirical SD, min, max, and relative bias for each
estimator.
}
\details{
Includes both Cox-based HR and AHR (Average Hazard Ratio from loghr_po)
estimators when AHR columns are present in the results.

For each subgroup (H and Hc) the function reports:
\itemize{
\item \strong{Avg}: Mean of the estimates across estimable simulations.
\item \strong{SD}: Empirical standard deviation.
\item \strong{Min / Max}: Range.
\item \strong{Rel Bias}: Relative bias in percent,
\code{100 * (Avg - true) / true}.
}

When bootstrap-corrected columns (\code{hr.H.bc}, \code{hr.Hc.bc}) are
present in \code{results}, an additional bias-corrected row
(\code{"theta-hat*(H)"} or \code{"theta-hat*(Hc)"}) is added per subgroup.

When AHR columns (\code{ahr.H.hat}, \code{ahr.Hc.hat}) are present, AHR
estimation rows are appended using the DGM's true AHR values for relative
bias calculation.
}
\examples{
\dontrun{
build_estimation_table(
  results = results_alt,
  dgm = dgm_calibrated,
  analysis_method = "FSlg"
)
}

}
\seealso{
\code{\link{build_classification_table}},
\code{\link{format_oc_results}}, \code{\link{get_dgm_hr}}
}
